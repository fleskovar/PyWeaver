(function(e){function t(t){for(var a,r,s=t[0],l=t[1],c=t[2],u=0,_=[];u<s.length;u++)r=s[u],n[r]&&_.push(n[r][0]),n[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(_.length)_.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],a=!0,s=1;s<o.length;s++){var l=o[s];0!==n[l]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=o[0]))}return e}var a={},n={app:0},i=[];function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=a,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(o,a,function(t){return e[t]}.bind(null,a));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";var a=o("1356"),n=o.n(a);n.a},"048e":function(e,t,o){"use strict";var a=o("1233"),n=o.n(a);n.a},1:function(e,t){},1233:function(e,t,o){},1356:function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("cadf"),o("551c"),o("f751"),o("097d");var a=o("a026"),n=o("bb71"),i=o("8336"),r=o("0798"),s=o("c6a6"),l=o("8212"),c=o("4ca6"),d=o("887a"),u=o("288c"),_=o("2bc5"),v=o("a609"),h=o("a4f6"),p=o("b0af"),f=o("5e66"),m=o("ac7c"),g=o("cc20"),y=o("2b5d"),b=o("27e2"),k=o("c377"),x=o("8fea"),w=o("2e4b"),S=o("169a"),C=o("ce7e"),V=o("cd55"),D=o("553a"),$=o("4bd4"),T=o("ce87"),E=o("132d"),O=o("adda"),F=o("b675"),N=o("604c"),L=o("0f8e"),M=o("24c9"),P=o("8860"),R=o("e449"),A=o("8bd2"),I=o("f774"),z=o("de8e"),j=o("891e"),U=o("8dd9"),B=o("8b9c"),Y=o("026c"),G=o("490a"),H=o("8e36"),K=o("43a6"),W=o("5963"),q=o("1d4d"),J=o("6b53"),X=o("b56d"),Q=o("ba0d"),Z=o("2db4"),ee=o("7f2e"),te=o("c73b"),oe=o("7e85"),ae=o("e0c7"),ne=o("b73d"),ie=o("afd9"),re=o("fe57"),se=o("a844"),le=o("2677"),ce=o("8414"),de=o("c964"),ue=o("71d9"),_e=o("3a2f"),ve=o("eb2a"),he=o("f665"),pe=o("c584"),fe=o("3ccf"),me=o("0d3d"),ge=o("acdd"),ye=o("c341");o("da64");a["a"].use(n["a"],{iconfont:"md",components:{VBtn:i["a"],VAlert:r["a"],VAutocomplete:s["a"],VAvatar:l["a"],VBadge:c["a"],VBottomNav:d["a"],VBottomSheet:u["a"],VBreadcrumbs:_["a"],VBtnToggle:v["a"],VCalendar:h["a"],VCard:p["a"],VCarousel:f["a"],VCheckbox:m["a"],VChip:g["a"],VCombobox:y["a"],VCounter:b["a"],VDataIterator:k["a"],VDataTable:x["a"],VDatePicker:w["a"],VDialog:S["a"],VDivider:C["a"],VExpansionPanel:V["a"],VFooter:D["a"],VForm:$["a"],VHover:T["a"],VIcon:E["a"],VImg:O["a"],VInput:F["a"],VItemGroup:N["b"],VJumbotron:L["a"],VLabel:M["a"],VList:P["a"],VMenu:R["a"],VMessages:A["a"],VNavigationDrawer:I["a"],VOverflowBtn:z["a"],VPagination:j["a"],VSheet:U["a"],VParallax:B["a"],VPicker:Y["a"],VProgressCircular:G["a"],VProgressLinear:H["a"],VRadioGroup:K["a"],VRangeSlider:W["a"],VRating:q["a"],VResponsive:J["a"],VSelect:X["a"],VSlider:Q["a"],VSnackbar:Z["a"],VSparkline:ee["a"],VSpeedDial:te["a"],VStepper:oe["a"],VSubheader:ae["a"],VSwitch:ne["a"],VSystemBar:ie["a"],VTabs:re["a"],VTextarea:se["a"],VTextField:le["a"],VTimeline:ce["a"],VTimePicker:de["a"],VToolbar:ue["a"],VTooltip:_e["a"],VTreeview:ve["a"],VWindow:he["a"]},directives:{ClickOutside:pe["a"],Ripple:fe["a"],Resize:me["a"],Scroll:ge["a"],Touch:ye["a"]}});var be=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",[o("v-toolbar",{attrs:{app:"",dark:"",fixed:"","clipped-left":"",flat:""}},[o("v-toolbar-title",{staticClass:"headline text-uppercase"},[o("span",[e._v("Py")]),o("span",{staticClass:"font-weight-light"},[e._v("Weaver")]),o("span",[e._v("2")])]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{flat:"",small:""},on:{click:e.OpenFile}},[o("span",[e._v("Open file")]),o("v-icon",[e._v("folder_open")])],1),o("v-btn",{attrs:{flat:"",small:""},on:{click:e.SaveModel}},[o("span",[e._v("Save model")]),o("v-icon",[e._v("cloud_download")])],1)],1),e.connected?o("v-chip",{attrs:{color:"green","text-color":"white"}},[e._v("Connected")]):e._e(),e.connected?e._e():o("v-chip",{attrs:{color:"red","text-color":"white"}},[e._v("Disconnected")])],1),o("input",{attrs:{type:"file",id:"fileInput",hidden:""},on:{change:function(t){return e.OpenModel(t)}}}),o("SideBar"),o("v-content",{staticStyle:{overflow:"hidden"}},[o("v-toolbar",{staticClass:"grey darken-2",attrs:{dark:"",dense:""}},[e._v("          \n                    \n        Ouline        \n        "),o("v-item-group",[o("v-btn",{attrs:{flat:"",icon:""},on:{click:function(t){return e.SetDashed(!1)}}},[o("v-icon",[e._v("remove")])],1),o("v-btn",{attrs:{flat:"",icon:""},on:{click:function(t){return e.SetDashed(!0)}}},[o("v-icon",[e._v("more_horiz")])],1)],1),o("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[o("v-btn",e._g({attrs:{dark:"",icon:""}},a),[o("v-icon",[e._v("format_color_fill")])],1)]}}])},[o("v-list",{attrs:{dark:""}},e._l(e.colors,function(t,a){return o("v-list-tile",{key:a,on:{click:function(o){return e.SetColor(t.code)}}},[o("v-list-tile-title",[o("v-icon",{attrs:{color:t.code}},[e._v("format_color_fill")])],1)],1)}),1)],1),o("v-overflow-btn",{staticStyle:{width:"50px"},attrs:{items:["1","2","3","5","8"],label:"Stroke size","hide-details":"",overflow:""},on:{change:function(t){return e.SetStrokeSize()}},model:{value:e.stroke_size,callback:function(t){e.stroke_size=t},expression:"stroke_size"}}),o("v-divider",{attrs:{vertical:""}}),o("v-text-field",{staticClass:"caption",attrs:{small:"",placeholder:"Node Library Search...","prepend-inner-icon":"library_books"}})],1),o("v-card",{attrs:{flat:"",height:"100%"}},[o("div",{class:e.canvas_color,attrs:{id:"canvas"}})]),o("v-card",{staticStyle:{height:"100px"},attrs:{color:"red"}},[o("div",[e._v("ASDASD")])])],1),o("CodeEditor"),o("LibrarySaveDialog"),o("v-footer",{staticClass:"pa-3",attrs:{app:"",dark:""}},[o("v-btn",{attrs:{color:"grey darken-4",dark:""},on:{click:e.resetServer}},[e._v("Reset")]),o("v-spacer"),o("div",[e._v("© "+e._s((new Date).getFullYear()))])],1)],1)},ke=[],xe=(o("6762"),o("2fdb"),o("d225")),we=o("b0b4"),Se=new a["a"],Ce=function(){function e(t,o){Object(xe["a"])(this,e),this.container=t,this.graph={},this.store=o,this.codeNode={}}return Object(we["a"])(e,[{key:"GetModelXML",value:function(){var e=this.graph,t=new mxCodec,o=t.encode(e.getModel()),a=mxUtils.getPrettyXml(o);return a}},{key:"LoadModel",value:function(e){var t=this.graph,o=e,a=mxUtils.parseXml(o),n=a.documentElement,i=new mxCodec(n.ownerDocument);i.decode(n,t.getModel())}},{key:"mount",value:function(){var e=this;mxEvent.disableContextMenu(this.container),mxGraph.prototype.isCellMovable=function(e){if(this.lastEvent.altKey)return!1;var t=this.view.getState(e),o=null!=t?t.style:this.getCellStyle(e);return this.isCellsMovable()&&!this.isCellLocked(e)&&0!=o[mxConstants.STYLE_MOVABLE]},mxGraphHandler.prototype.guidesEnabled=!0,mxEdgeHandler.prototype.snapToTerminals=!0;var t=new mxGraph(this.container);this.graph=t,t.store=this.store,t.setAllowDanglingEdges(!1),t.setConnectable(!0),t.setMultigraph(!0),t.isCellEditable=function(e){return!1},t.htmlLabels=!0,t.autoSizeCells=!0,t.foldingEnabled=!1,t.setPanning(!0),t.scrollTileSize=new mxRectangle(0,0,400,400),this.calcDefaultStyles();var o=t.getPreferredSizeForCell;t.getPreferredSizeForCell=function(e){var t=o.apply(this,arguments),a=(this.getCellStyle(e),document.getElementById("node_"+e.id));return console.log("yay"),t.width=a.offsetWidth+50,t.height=a.offsetHeight+50,t},mxRubberband.prototype.isForceRubberbandEvent=function(e){return!1},new mxRubberband(t),t.isPort=function(e){this.getCellGeometry(e);return!1},mxEvent.addMouseWheelListener(mxUtils.bind(this,function(e,o){1==o?t.zoomIn():t.zoomOut()}));var a=new mxKeyHandler(t);a.bindKey(46,function(e){t.isEnabled()&&t.removeCells()}),t.connectionHandler.addListener(mxEvent.CONNECT,function(t,o){var a=o.getProperty("cell"),n={source_id:a.source.parent.id,target_id:a.target.parent.id,source_var:a.source.value,target_var:a.target.value};e.store.dispatch("add_connection",n)}),t.addListener(mxEvent.DOUBLE_CLICK,function(t,o){var a=o.getProperty("cell"),n=o.getProperty("event");if(null!=a&&"rect"==n.target.localName&&a.isNode){var i=e.store.state.code_nodes[a.id];e.store.dispatch("open_code_editor",i)}}),t.addListener(mxEvent.MOUSE_MOVE,function(e,o){t.isMouseDown&&console.log("yay")}),t.addListener(mxEvent.CELLS_REMOVED,function(t,o){for(var a=o.properties.cells,n=0;n<a.length;n++){var i=a[n];if(i.edge){var r={source_id:i.source.parent.id,source_var:i.source.value,target_id:i.target.parent.id,target_var:i.target.value};e.store.dispatch("remove_connection",r)}}for(n=0;n<a.length;n++){i=a[n];i.isNode&&e.store.dispatch("delete_node",i.id)}})}},{key:"addResults",value:function(e){var t=this.graph.getDefaultParent();this.graph.getModel().beginUpdate();try{t.results=JSON.stringify(e)}finally{this.graph.getModel().endUpdate()}}},{key:"addScopes",value:function(e){var t=this.graph.getDefaultParent();this.graph.getModel().beginUpdate();try{t.scopes=JSON.stringify(e)}finally{this.graph.getModel().endUpdate()}}},{key:"addNode",value:function(e){var t=null,o=this.graph.getDefaultParent();this.graph.getModel().beginUpdate();try{var a=e.outputs,n=e.inputs,i=e.id,r=30*Math.max(a.length,n.length)+40;e.height||(e.height=r);t=this.graph.insertVertex(o,i,"",e.x,e.y,e.width,e.height,"verticalAlign=middle");t.value="<div style='border: 1px solid;' id='node_"+t.id+"' class='node_display'></div>",t.display_act_code="",t.setConnectable(!1),t.isNode=!0}finally{this.graph.getModel().endUpdate()}return this.changePorts(t,a,1,"output"),this.changePorts(t,n,0,"input"),t}},{key:"addEdge",value:function(e){for(var t=this.graph,o=t.getDefaultParent(),a=t.getModel(),n=a.cells[e["source_id"]],i=null,r=0;r<n.children.length;r++){var s=n.children[r];if(s.value==e["source_var"]){i=s;break}}var l=a.cells[e["target_id"]],c=null;for(r=0;r<l.children.length;r++){var d=l.children[r];if(d.value==e["target_var"]){c=d;break}}a.beginUpdate();try{t.insertEdge(o,null,"",i,c)}finally{a.endUpdate()}}},{key:"changePorts",value:function(e,t,o,a){var n=this.graph.getModel(),i=[],r=[],s="";s=0==o?"labelPosition=right;align=left;deletable=0":"labelPosition=left;align=right;deletable=0",this.graph.getModel().beginUpdate();try{if(e.children)for(var l=0;l<e.children.length;l++){var c=e.children[l],d=c.value,u=c.tag;t.includes(d)||u!=a?u==a&&(r.push(c),i.push(d)):(this.graph.removeCells(n.getEdges(c),!1),this.graph.removeCells([c],!1),l-=1)}for(l=0;l<t.length;l++){d=t[l];if(i.includes(d)){_=r[l];_.geometry.y=1/(t.length+1)*(l+1)}else{var _=this.graph.insertVertex(e,null,d,o,1/(t.length+1)*(l+1),10,10,s,!0);_.geometry.offset=new mxPoint(-5,-5),_.setConnectable(!0),_.tag=a}}this.graph.getView().validate()}finally{this.graph.getModel().endUpdate()}}},{key:"updateCell",value:function(e){this.graph.getView().clear(e,!1,!1),this.graph.getView().validate(),this.graph.cellSizeUpdated(e,!0)}},{key:"updateCellSize",value:function(e){this.graph.cellSizeUpdated(e,!0)}},{key:"setCellColor",value:function(e){console.log("cell color");for(var t=this.graph.selectionModel.cells,o=0;o<t.length;o++){var a=t[o],n=a.getStyle(),i=mxUtils.setStyle(n,mxConstants.STYLE_STROKECOLOR,e);this.graph.setCellStyle(i,[a])}}},{key:"setCellStroke",value:function(e){console.log("cell stroke");for(var t=this.graph.selectionModel.cells,o=0;o<t.length;o++){var a=t[o],n=a.getStyle(),i=mxUtils.setStyle(n,mxConstants.STYLE_STROKEWIDTH,e);this.graph.setCellStyle(i,[a])}}},{key:"setDashed",value:function(e){for(var t=0,o=this.graph.selectionModel.cells,a=0;a<o.length;a++){var n=o[a],i=n.getStyle();e&&(t=1);var r=mxUtils.setStyle(i,mxConstants.STYLE_DASHED,t);this.graph.setCellStyle(r,[n])}}},{key:"calcDefaultStyles",value:function(){var e=this.graph;if(this.store.state.config.dark_mode){var t=e.getStylesheet().getDefaultVertexStyle();t["fillColor"]="#212121",t["strokeColor"]="#FFFFFF",t["fontColor"]="#FFFFFF",t["fontStyle"]="1",t=e.getStylesheet().getDefaultEdgeStyle(),t["strokeColor"]="#FFFFFF",t["fontColor"]="#FFFFFF",t["fontStyle"]="0",t["fontStyle"]="0",t["startSize"]="8",t["endSize"]="8",t[mxConstants.STYLE_ROUNDED]=!0,t[mxConstants.STYLE_EDGE]=mxEdgeStyle.OrthConnector,t[mxConstants.STYLE_STROKEWIDTH]="1",t[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR]="#212121"}else{t=e.getStylesheet().getDefaultVertexStyle();t["fillColor"]="#FFFFFF",t["strokeColor"]="#000000",t["fontColor"]="#000000",t["fontStyle"]="1",t=e.getStylesheet().getDefaultEdgeStyle(),t["strokeColor"]="#000000",t["fontColor"]="#000000",t["fontStyle"]="0",t["fontStyle"]="0",t["startSize"]="8",t["endSize"]="8",t[mxConstants.STYLE_ROUNDED]=!0,t[mxConstants.STYLE_EDGE]=mxEdgeStyle.EntityRelation,t[mxConstants.STYLE_STROKEWIDTH]="1",t[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR]="#FFFFFF"}}},{key:"updateSyles",value:function(){this.calcDefaultStyles(),console.log("changed to dark mode")}}]),e}(),Ve=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{width:"800",persistent:""},on:{keydown:e.codeDialogShortcuts},model:{value:e.code_dialog,callback:function(t){e.code_dialog=t},expression:"code_dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"gray"}},[o("v-toolbar-title",[e._v("Editor")]),o("v-btn",{attrs:{icon:""},on:{click:e.openSaveDialog}},[o("v-icon",[e._v("save")])],1),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[o("v-icon",[e._v("close")])],1)],1)],1),o("v-card-text",[o("v-tabs",{attrs:{dark:""}},[o("v-tab",[e._v("Code")]),o("v-tab-item",[o("codemirror",{ref:"code_editor",attrs:{options:e.cmOptions},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),o("v-tab",[e._v("Display")]),o("v-tab-item",[o("codemirror",{ref:"ui_editor",attrs:{options:e.dispCmOptions},model:{value:e.display_code,callback:function(t){e.display_code=t},expression:"display_code"}})],1),o("v-tab",[e._v("Display Actions")]),o("v-tab-item",[o("codemirror",{ref:"script_editor",attrs:{options:e.dispActCmOptions},model:{value:e.display_act_code,callback:function(t){e.display_act_code=t},expression:"display_act_code"}})],1)],1),o("v-spacer")],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"green",flat:"",dark:""},on:{click:e.saveCode}},[e._v("Update")])],1)],1)],1)},De=[],$e=(o("a7be"),o("db91"),o("8c2e"),o("d69f"),o("f9d4"),o("8f94")),Te={components:{codemirror:$e["codemirror"]},mounted:function(){var e=this;window.setInterval(function(){e.updateEditors()},250)},data:function(){return{cmOptions:{tabSize:4,indentUnit:4,mode:"python",lineNumbers:!0,indentWithTabs:!0,viewportMargin:1/0,line:!0,theme:"base16-dark",autoRefresh:!0},dispCmOptions:{tabSize:4,indentUnit:4,mode:"htmlmixed",lineNumbers:!0,indentWithTabs:!0,viewportMargin:1/0,line:!0,theme:"base16-dark",autoRefresh:!0},dispActCmOptions:{tabSize:4,indentUnit:4,mode:"javascript",lineNumbers:!0,indentWithTabs:!0,viewportMargin:1/0,line:!0,theme:"base16-dark",autoRefresh:!0},has_error:!1}},methods:{bugHighlight:function(){-1!=this.error_line&&this.$refs.code_editor.cminstance.addLineClass(this.error_line-1,"background","line-error")},bugUnHighlight:function(){-1!=this.error_line&&this.$refs.code_editor.cminstance.removeLineClass(this.error_line,"background","line-error")},updateEditors:function(){this.code_dialog&&(this.$refs.code_editor.codemirror&&this.$refs.code_editor.codemirror.refresh(),this.$refs.ui_editor.codemirror&&this.$refs.ui_editor.codemirror.refresh(),this.$refs.script_editor.codemirror&&this.$refs.script_editor.codemirror.refresh())},closeDialog:function(){this.bugUnHighlight(),this.code_dialog=!1},openSaveDialog:function(){this.$store.commit("set_dialog_open",!0)},saveCode:function(){this.$store.dispatch("save_node_code",{code:this.code,display_code:this.display_code,display_act_code:this.display_act_code}),this.closeDialog()},codeDialogShortcuts:function(e){this.code_dialog&&(13===e.keyCode&&e.shiftKey?this.saveCode():27===e.keyCode&&this.closeDialog())}},computed:{error_line:{get:function(){var e=this.$store.state.selected_node.id;return e&&this.$store.state.code_error_dict[e]?this.$store.state.code_error_dict[e].line:-1}},code:{get:function(){return this.$store.state.code},set:function(e){this.$store.commit("set_code",e)}},display_code:{get:function(){return this.$store.state.display_code},set:function(e){this.$store.commit("set_display_code",e)}},display_act_code:{get:function(){return this.$store.state.display_act_code},set:function(e){this.$store.commit("set_display_act_code",e)}},code_dialog:{get:function(){return this.$store.state.open_code_editor},set:function(e){this.$store.commit("open_editor",e)}}},watch:{code_dialog:function(e,t){e&&this.bugHighlight()}}},Ee=Te,Oe=(o("b68c"),o("2877")),Fe=o("6544"),Ne=o.n(Fe),Le=o("99d9"),Me=o("9910"),Pe=o("71a3"),Re=o("c671"),Ae=o("2a7f"),Ie=Object(Oe["a"])(Ee,Ve,De,!1,null,null,null),ze=Ie.exports;Ne()(Ie,{VBtn:i["a"],VCard:p["a"],VCardActions:Le["a"],VCardText:Le["b"],VDialog:S["a"],VIcon:E["a"],VSpacer:Me["a"],VTab:Pe["a"],VTabItem:Re["a"],VTabs:re["a"],VToolbar:ue["a"],VToolbarItems:Ae["a"],VToolbarTitle:Ae["b"]});var je=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-navigation-drawer",{attrs:{permanent:"",clipped:"",dark:"",app:"",width:"300","mini-variant":e.drawer_mini}},[o("v-list",[o("v-list-tile",[o("v-list-tile-content"),o("v-list-tile-action",{on:{click:e.toggleMiniDrawer}},[o("v-btn",{attrs:{icon:""}},[e.drawer_mini?o("v-icon",[e._v("keyboard_arrow_right")]):e._e(),e.drawer_mini?e._e():o("v-icon",[e._v("keyboard_arrow_left")])],1)],1)],1),o("v-list-tile",[o("v-list-tile-content",[o("br"),o("br"),o("v-text-field",{attrs:{label:"Document name"},model:{value:e.document_name,callback:function(t){e.document_name=t},expression:"document_name"}}),o("br")],1)],1),o("v-divider"),o("v-list-tile",{on:{click:e.addNode,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.shiftKey?e.canvasShortcuts(t):null}}},[o("v-list-tile-action",[o("v-btn",{staticClass:"text-lg-right",attrs:{icon:""}},[o("v-icon",[e._v("add")])],1)],1),o("v-list-tile-content",[e._v("ADD EMPTY NODE")])],1),o("v-divider"),o("v-list-tile",{on:{click:function(t){e.drawer_mini=!1}}},[o("v-list-tile-action",[o("v-btn",{staticClass:"text-lg-right",attrs:{icon:""}},[o("v-icon",[e._v("library_books")])],1)],1),o("v-list-tile-content",[e._v("Node Library")])],1),o("v-card",{directives:[{name:"show",rawName:"v-show",value:!e.drawer_mini,expression:"!drawer_mini"}],staticStyle:{padding:"10px"}},[o("v-text-field",{attrs:{label:"Search Node Library",dark:"",flat:"","solo-inverted":"","hide-details":"",clearable:"","clear-icon":"mdi-close-circle-outline"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),o("v-card",{directives:[{name:"show",rawName:"v-show",value:!e.drawer_mini,expression:"!drawer_mini"}],staticStyle:{padding:"20px","overflow-y":"scroll"},attrs:{height:"300px",flat:""}},[o("v-treeview",{ref:"tree",attrs:{items:e.items,search:e.search,filter:e.filter,"open-on-click":""},scopedSlots:e._u([{key:"prepend",fn:function(t){var a=t.item;return[a.children?o("v-icon",[e._v("folder")]):e._e(),a.children?e._e():o("v-icon",[e._v("insert_drive_file")])]}},{key:"label",fn:function(t){var a=t.item;return[o("div",{on:{click:function(t){return e.addLibraryNode(a.lib_id)}}},[e._v("\n            "+e._s(a.name)+"\n            "),a.children?e._e():o("v-icon",[e._v("add_circle_outline")]),0==a.id?o("v-btn",{attrs:{icon:""},on:{click:e.refreshLibrary}},[o("v-icon",[e._v("refresh")])],1):e._e()],1)]}}])})],1),o("v-divider"),o("v-list-tile",{on:{click:e.runServer}},[o("v-list-tile-action",[o("v-btn",{staticClass:"text-lg-right",attrs:{icon:""}},[o("v-icon",[e._v("computer")])],1)],1),o("v-list-tile-content",[e._v("RUN")])],1),o("v-divider"),o("v-list-tile",[o("v-list-tile-action",[o("v-btn",{staticClass:"text-lg-right",attrs:{icon:""},on:{click:function(t){e.showOptionsDialog=!0}}},[o("v-icon",[e._v("settings")])],1)],1),o("v-list-tile-content",[e._v("SETTINGS")])],1)],1),o("OptionsDialog",{on:{close:function(t){e.showOptionsDialog=!1}},model:{value:e.showOptionsDialog,callback:function(t){e.showOptionsDialog=t},expression:"showOptionsDialog"}})],1)},Ue=[],Be=(o("386d"),o("ffe7")),Ye=o.n(Be),Ge=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{width:"800",persistent:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"gray"}},[o("v-toolbar-title",[e._v("Options")]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$emit("close")}}},[o("v-icon",[e._v("close")])],1)],1)],1),o("v-card-text",[o("v-checkbox",{attrs:{label:"Automatically run flowsheet"},model:{value:e.autoRun,callback:function(t){e.autoRun=t},expression:"autoRun"}}),o("v-checkbox",{attrs:{label:"Automatically sync model"},model:{value:e.autoSync,callback:function(t){e.autoSync=t},expression:"autoSync"}}),o("v-checkbox",{attrs:{label:"Dark Mode (requires page reload)"},model:{value:e.darkMode,callback:function(t){e.darkMode=t},expression:"darkMode"}})],1)],1)],1)},He=[],Ke={props:["value"],data:function(){return{}},computed:{autoRun:{get:function(){return this.$store.state.config.auto_exec},set:function(e){this.$store.commit("set_auto_exec",e),this.$store.dispatch("save_config_file")}},autoSync:{get:function(){return this.$store.state.config.sync_model},set:function(e){this.$store.commit("set_auto_sync",e),this.$store.dispatch("save_config_file")}},darkMode:{get:function(){return this.$store.state.config.dark_mode},set:function(e){this.$store.dispatch("change_dark_mode",e),this.$$store.dispatch("sync_model_with_server"),this.$store.dispatch("save_config_file")}}}},We=Ke,qe=Object(Oe["a"])(We,Ge,He,!1,null,null,null),Je=qe.exports;Ne()(qe,{VBtn:i["a"],VCard:p["a"],VCardText:Le["b"],VCheckbox:m["a"],VDialog:S["a"],VIcon:E["a"],VSpacer:Me["a"],VToolbar:ue["a"],VToolbarItems:Ae["a"],VToolbarTitle:Ae["b"]});var Xe={components:{OptionsDialog:Je},mounted:function(){},data:function(){return{drawer_mini:!0,search:"",fuse_options:{keys:["name"],distance:100,location:0,maxPatternLength:32,minMatchCharLength:1,id:"id"},showOptionsDialog:!1}},methods:{addNode:function(){this.$socket.emit("new_empty_node")},refreshLibrary:function(){this.$socket.emit("refresh_library")},runServer:function(){this.$store.dispatch("execute_server")},resetServer:function(){this.$socket.emit("reset")},toggleMiniDrawer:function(){this.drawer_mini=!this.drawer_mini},addLibraryNode:function(e){this.$socket.emit("load_node",e)},treeFilter:function(e,t,o){var a=new Ye.a(this.items,this.fuse_options),n=a.search(t);return n.indexOf(e.id)>-1}},computed:{items:{get:function(){return this.$store.state.libraryTree}},filter:function(){return this.treeFilter},document_name:{get:function(){return this.$store.state.document_name},set:function(e){this.$store.commit("set_document_name",e)}}}},Qe=Xe,Ze=o("ba95"),et=o("40fe"),tt=o("5d23"),ot=Object(Oe["a"])(Qe,je,Ue,!1,null,null,null),at=ot.exports;Ne()(ot,{VBtn:i["a"],VCard:p["a"],VDivider:C["a"],VIcon:E["a"],VList:P["a"],VListTile:Ze["a"],VListTileAction:et["a"],VListTileContent:tt["a"],VNavigationDrawer:I["a"],VTextField:le["a"],VTreeview:ve["a"]});var nt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{width:"800",persistent:""},model:{value:e.save_dialog,callback:function(t){e.save_dialog=t},expression:"save_dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"gray"}},[o("v-toolbar-title",[e._v("Save to Library")]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[o("v-icon",[e._v("close")])],1)],1)],1),o("v-card-text",[o("v-container",{attrs:{"grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs6:""}},[o("v-card",{staticStyle:{"overflow-y":"scroll",border:"2px solid grey","border-radius":"1px"},attrs:{height:"500px",flat:""}},[o("v-treeview",{ref:"tree",attrs:{items:e.libraryTree,activatable:"",active:e.selected_folder,"return-object":""},on:{"update:active":function(t){e.selected_folder=t}},scopedSlots:e._u([{key:"prepend",fn:function(t){var a=t.item;return[o("div",{on:{mouseover:function(t){e.hover_tree_id=a.id},mouseleave:function(t){e.hover_tree_id=-1}}},[a.children?o("v-icon",[e._v("folder")]):e._e(),a.children?e._e():o("v-icon",[e._v("insert_drive_file")])],1)]}},{key:"label",fn:function(t){var a=t.item;return[o("div",{on:{mouseover:function(t){e.hover_tree_id=a.id},mouseleave:function(t){e.hover_tree_id=-1}}},[e._e(),o("span",[e._v(e._s(a.name))]),e._v("\n                                                 \n                                                "),o("a",[a.id==e.hover_tree_id?o("v-icon",{on:{click:function(t){return e.openEditNameDialog(a)}}},[e._v("edit")]):e._e()],1),o("a",[a.id==e.hover_tree_id&&a.children?o("v-icon",{on:{click:function(t){return e.openNewFolderDialog(a)}}},[e._v("create_new_folder")]):e._e()],1),o("a",[a.id==e.hover_tree_id&&a.children?o("v-icon",{on:{click:function(t){return e.openDeleteFolderDialog(a)}}},[e._v("delete_forever")]):e._e()],1)],1)]}}])})],1)],1),o("v-flex",{attrs:{xs6:""}},[o("v-card",{attrs:{flat:"",height:"500px"}},[o("v-text-field",{attrs:{label:"Node Template Name",rules:[e.rules.required],clearable:""},model:{value:e.save_name,callback:function(t){e.save_name=t},expression:"save_name"}}),o("v-textarea",{attrs:{label:"Node Description",value:"Short description of what the node does.","no-resize":"",outline:""}}),o("v-textarea",{attrs:{label:"Search keywords",value:"",hint:"Comma separated keywords","no-resize":"",outline:"","persistent-hint":""}})],1)],1)],1)],1)],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"blue",flat:"",dark:""},on:{click:e.saveNode}},[e._v("Save")])],1)],1),o("v-dialog",{attrs:{width:"500px"},model:{value:e.add_folder_dialog,callback:function(t){e.add_folder_dialog=t},expression:"add_folder_dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"gray"}},[o("v-toolbar-title",[e._v("New Folder")]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.add_folder_dialog=!1}}},[o("v-icon",[e._v("close")])],1)],1)],1),o("v-card-text",[o("v-text-field",{attrs:{label:"New Folder Name",rules:[e.rules.required]},model:{value:e.new_folder_name,callback:function(t){e.new_folder_name=t},expression:"new_folder_name"}})],1),o("v-card-actions",[o("v-btn",{attrs:{color:"green",flat:"",dark:""},on:{click:e.createNewFolder}},[e._v("Create")]),o("v-spacer"),o("v-btn",{attrs:{color:"red",flat:"",dark:""},on:{click:function(t){e.add_folder_dialog=!1}}},[e._v("Cancel")])],1)],1)],1),o("v-dialog",{attrs:{width:"500px"},model:{value:e.delete_folder_dialog,callback:function(t){e.delete_folder_dialog=t},expression:"delete_folder_dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"gray"}},[o("v-toolbar-title",[e._v("Delete Folder?")]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.delete_folder_dialog=!1}}},[o("v-icon",[e._v("close")])],1)],1)],1),o("v-card-text",[e._v("\n                    Are you sure you want to permanently delete the folder and all the content inside?\n                ")]),o("v-card-actions",[o("v-btn",{attrs:{color:"blue",flat:"",dark:""},on:{click:e.deleteFolder}},[e._v("Yes, Delete It")]),o("v-spacer"),o("v-btn",{attrs:{color:"blue",flat:"",dark:""},on:{click:function(t){e.delete_folder_dialog=!1}}},[e._v("No")])],1)],1)],1),o("v-dialog",{attrs:{width:"500px"},model:{value:e.edit_name_dialog,callback:function(t){e.edit_name_dialog=t},expression:"edit_name_dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"gray"}},[o("v-toolbar-title",[e._v("Edit Name")]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.edit_name_dialog=!1}}},[o("v-icon",[e._v("close")])],1)],1)],1),o("v-card-text",[o("v-text-field",{attrs:{label:"New Name",rules:[e.rules.required]},model:{value:e.new_item_name,callback:function(t){e.new_item_name=t},expression:"new_item_name"}})],1),o("v-card-actions",[o("v-btn",{attrs:{color:"green",flat:"",dark:""},on:{click:e.renameItem}},[e._v("Rename")]),o("v-spacer"),o("v-btn",{attrs:{color:"red",flat:"",dark:""},on:{click:function(t){e.edit_name_dialog=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},it=[],rt=(o("7f7f"),{data:function(){return{selected_folder:[],rename_dialog:!1,name_dialog:!1,save_name:"New Template",rules:{required:function(e){return!!e||"Required."}},hover_tree_id:-1,add_folder_dialog:!1,delete_folder_dialog:!1,edit_name_dialog:!1,selected_item:{},new_folder_name:"New Folder",new_item_name:""}},methods:{closeDialog:function(){this.$store.commit("set_dialog_open",!1)},saveNode:function(){if(this.save_name){var e={},t={},o=this.$store.state.selected_node;t.name=this.save_name,t.code=o.code,t.display_code=o.display_code,t.display_act_code=o.display_act_code;var a=this.selected_folder[0].path;e.path=a,e.node_data=t,this.$socket.emit("save_to_library",e),this.closeDialog()}},openNewFolderDialog:function(e){this.selected_item=e,this.new_folder_name="New Folder",this.add_folder_dialog=!0},openDeleteFolderDialog:function(e){this.selected_item=e,this.delete_folder_dialog=!0},openEditNameDialog:function(e){this.selected_item=e,this.new_item_name=e.name,this.edit_name_dialog=!0},createNewFolder:function(){var e={path:this.selected_item.path,name:this.new_folder_name};this.$socket.emit("new_folder",e),this.add_folder_dialog=!1},deleteFolder:function(){var e=this.selected_item.path;this.$socket.emit("delete_folder",e),this.delete_folder_dialog=!1},renameItem:function(){var e={path:this.selected_item.path,name:this.new_item_name};this.$socket.emit("rename_folder",e),this.edit_name_dialog=!1}},computed:{save_dialog:{get:function(){return this.$store.state.save_dialog}},libraryTree:{get:function(){return this.$store.state.libraryTree}}}}),st=rt,lt=o("a523"),ct=o("0e8f"),dt=o("a722"),ut=Object(Oe["a"])(st,nt,it,!1,null,null,null),_t=ut.exports;Ne()(ut,{VBtn:i["a"],VCard:p["a"],VCardActions:Le["a"],VCardText:Le["b"],VContainer:lt["a"],VDialog:S["a"],VFlex:ct["a"],VIcon:E["a"],VLayout:dt["a"],VSpacer:Me["a"],VTextField:le["a"],VTextarea:se["a"],VToolbar:ue["a"],VToolbarItems:Ae["a"],VToolbarTitle:Ae["b"],VTreeview:ve["a"]});var vt={name:"App",components:{CodeEditor:ze,SideBar:at,LibrarySaveDialog:_t},data:function(){return{connected:!1,toggle_exclusive:2,colors:[{code:"#F44336",color:"red"},{code:"#2196F3",color:"blue"},{code:"#4CAF50",color:"green"},{code:"#FFFFFF",color:"white"},{code:"#FFEB3B",color:"yellow"},{code:"#E91E63",color:"pink"}],stroke_size:"",showOptionsDialog:!1}},mounted:function(){var e=this,t=document.getElementById("canvas"),o=new Ce(t,this.$store);o.mount(),this.$store.commit("set_canvas",o),Se.$on("update_displays",this.updateCanvas),window.setInterval(function(){e.PushModel()},3e4)},methods:{SetDashed:function(e){this.$store.dispatch("change_element_dashed",e)},SetStrokeSize:function(){this.$store.dispatch("change_element_stroke_size",this.stroke_size)},SetColor:function(e){this.$store.dispatch("change_element_color",e)},PushModel:function(){this.$store.dispatch("push_server_model")},OpenFile:function(){var e=document.getElementById("fileInput");e.click()},OpenModel:function(e){var t=this,o=e.target.files[0];if(o){var a=new FileReader;a.onload=function(e){var o=e.target.result;t.$socket.emit("load_model",o)},a.readAsText(o)}},resetServer:function(){this.$socket.emit("reset")},SaveModel:function(){var e=this.$store.state.canvas.GetModelXML(),t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e));var o=this.$store.state.document_name+".xml";t.setAttribute("download",o),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},updateCanvas:function(){this.$store.dispatch("update_all_cells")}},computed:{document_name:{get:function(){return this.$store.state.document_name}},canvas_color:{get:function(){return this.$store.state.config.dark_mode?"grey darken-4":"white"}}},sockets:{connect:function(){this.connected=!0},disconnect:function(){this.connected=!1}}},ht=vt,pt=(o("034f"),o("7496")),ft=o("549c"),mt=Object(Oe["a"])(ht,be,ke,!1,null,null,null),gt=mt.exports;Ne()(mt,{VApp:pt["a"],VBtn:i["a"],VCard:p["a"],VChip:g["a"],VContent:ft["a"],VDivider:C["a"],VFooter:D["a"],VIcon:E["a"],VItemGroup:N["b"],VList:P["a"],VListTile:Ze["a"],VListTileTitle:tt["b"],VMenu:R["a"],VOverflowBtn:z["a"],VSpacer:Me["a"],VTextField:le["a"],VToolbar:ue["a"],VToolbarItems:Ae["a"],VToolbarTitle:Ae["b"]});var yt=o("2f62"),bt="node_id",kt="is_variable",xt="param_name",wt="PyWeaverNodeDisplay",St={DISPLAY_NODE_ID_ATTR:bt,DISPLAY_VAR_ATTR:kt,DISPLAY_VAR_NAME_ATTR:xt,DISPLAY_CLASS:wt},Ct=function(){function e(t,o,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(xe["a"])(this,e),this.canvas=o,this.id=n||null,this.inputs={},this.outputs={},this.code_source="local",this.code="",this.display_code=t,this.display_act_code="",this.cell_id="",this.cell={},this.compiled_display_code="",this.compileDisplayCode(),this.store=a,this.x=20,this.y=20,this.width=100,this.height=null}return Object(we["a"])(e,[{key:"setCell",value:function(e){this.cell=e,this.id=e.id}},{key:"compileDisplayCode",value:function(){this.compiled_display_code="<div "+St.DISPLAY_NODE_ID_ATTR+"='"+this.cell.id+"' class='"+St.DISPLAY_CLASS+"'id='node_"+this.cell.id+"'>"+this.display_code+"</div>"}},{key:"setCode",value:function(e){this.code=e,this.cell.code=e}},{key:"setDisplayCode",value:function(e){this.display_code=e,this.compileDisplayCode(),this.cell.display_code=e}},{key:"setDisplayActCode",value:function(e){this.display_act_code=e,this.cell.display_act_code=e}}]),e}(),Vt=o("8055"),Dt=o.n(Vt),$t=Dt()("http://localhost:5000"),Tt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{key:e.run_id},[o("v-runtime-template",{attrs:{template:e.template,display_code:e.display_code}})],1)},Et=[],Ot=(o("ac6a"),o("456d"),o("75fc")),Ft={bind:function(e,t,o){o.context["scope"][t.arg]||(o.context["scope"][t.arg]=t.value)}};a["a"].directive("val",Ft);var Nt=o("61cc"),Lt=o.n(Nt),Mt=function(e){return[].concat(Object(Ot["a"])(Object.keys(e.data&&e.data()||{})),Object(Ot["a"])(Object.keys(e.props||{})))},Pt=function(e,t,o){if(!t.hasOwnProperty(o)){var a=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,a)}},Rt=function(e){var t={};return e.forEach(function(e){e&&Object.getOwnPropertyNames(e).forEach(function(o){return Pt(e,t,o)})}),t},At=function(e,t){var o={};return t.forEach(function(t){return Pt(e,o,t)}),o},It={props:{template:String,display_code:String},directives:{Val:Ft},data:function(){return{plotly:Lt.a}},render:function(e){if(this.template){var t=this.$parent,o=t.$data,a=t.$props,n=t.$options,i="{}";if(this.display_code&&(i=this.display_code),i!=this.$parent.$data._previous_display_code){var r="function(){return "+this.$parent.$data._previous_display_code+" }();",s=Function("return "+r)();for(var l in s)delete n.methods[l],delete this.$parent[l];this.$parent.$data._previous_display_code=i,r="function(){return "+i+" }();";var c=Function("return "+r)();for(var l in c){var d=c[l].bind(this.$parent);n.methods[l]=d,this.$parent[l]=d}}this.$parent.$data._previous_template!=this.template&&(this.$parent.$data.scope={},this.$parent.$data._previous_template=this.template);var u=Object.keys(n.methods||{}),_=Mt(n).concat(u),v=At(this.$parent,u),h=Rt([o,a,v]),p={template:this.template||"<div></div>",props:_,computed:n.computed,components:n.components};return e(p,{props:h})}}},zt={props:["_node","store"],data:function(){return{id:"",template:"<div>Node</div>",display_code:"{}",scope:{},node:{},_previous_template:"",_previous_display_code:"{}"}},components:{VRuntimeTemplate:It},directives:{Val:Ft},methods:{changeCode:function(e){this.template="<div>"+e+"</div>"},changeAct:function(e){this.display_code=e},updateDisplay:function(){this.$forceUpdate(),this.onResults&&this.onResults()}},computed:{run_id:function(){return this.store.state.run_id}},mounted:function(){this.node=new Proxy(this._node,{get:function(e,t,o){var a=null;if("__ob__"!=t){var n=null,i=null;if(t in e.inputs){console.log("input request");var r=e.inputs[t];r&&(n=r.id,i=r.var_name)}else n=e.id,i=t;n&&i&&n in e.store.state.results&&i in e.store.state.results[n]&&(a=e.store.state.results[n][i])}return a}})}},jt=zt,Ut=Object(Oe["a"])(jt,Tt,Et,!1,null,null,null),Bt=Ut.exports;a["a"].use(yt["a"]);var Yt=new yt["a"].Store({state:{canvas:{},selected_node:{},open_code_editor:!1,code:"",display_code:"",display_act_code:"",code_nodes:{},document_name:"Untitled",node_displays:{},results:{},config:{auto_exec:!0,sync_model:!0,dark_mode:!0},run_id:0,libraryTree:[],save_dialog:!1,session_id:null,code_error_dict:{},code_parse_error_list:[]},mutations:{add_code_error:function(e,t){e.code_error_dict[t.id]={line:t.line,type:t.error_tyoe,error:t.error}},clear_code_error_list:function(e){e.code_error_dict={}},set_dark_mode:function(e,t){e.config.dark_mode=t},set_auto_exec:function(e,t){e.config.auto_exec=t},set_sync_model:function(e,t){e.config.sync_model=t},tree_change:function(e,t){e.libraryTree=t},set_selected_node:function(e,t){e.selected_node=t},open_editor:function(e,t){e.open_code_editor=t},set_dialog_open:function(e,t){e.save_dialog=t},set_canvas:function(e,t){e.canvas=t},set_code:function(e,t){e.code=t},set_display_code:function(e,t){e.display_code=t},set_display_act_code:function(e,t){e.display_act_code=t},set_document_name:function(e,t){e.document_name=t},set_session_id:function(e,t){e.session_id=t}},actions:{update_all_cells:function(e){var t=e.state.canvas.graph;for(var o in e.state.code_nodes){var a=e.state.code_nodes[o].cell;t.updateCellSize(a,!0)}},push_server_model:function(e){e.state.config.sync_model&&e.dispatch("sync_model_with_server")},sync_model_with_server:function(e){var t={};t.session_id=e.state.session_id,t.xml=e.state.canvas.GetModelXML(),$t.emit("sync_model",t)},open_code_editor:function(e,t){e.commit("set_selected_node",t),e.commit("set_code",t.code),e.commit("set_display_code",t.display_code),e.commit("set_display_act_code",t.display_act_code),e.commit("open_editor",!0)},socket_addNode:function(e,t){var o=e.state.canvas,n=t["id"],i=new Ct("Node",e.state.canvas,e,n);i.inputs=t["input_port_names"],i.outputs=t["out_port_names"],t["x"]&&t["y"]&&t["width"]&&t["height"]&&(i.x=t["x"],i.y=t["y"],i.width=t["width"],i.height=t["height"]);var r=o.addNode(i),s=r.id,l=a["a"].extend(Bt),c=new l({propsData:{_node:i,store:e}});i.setCell(r),i.setCode(t.code),c.changeCode(t.display_code),i.setDisplayCode(t.display_code),c.changeAct(t.display_act_code),i.setDisplayActCode(t.display_act_code),c.$mount(),document.getElementById("node_"+s).appendChild(c.$el),e.state.node_displays[r.id]=c,e.state.code_nodes[r.id]=i,a["a"].nextTick().then(function(){o.updateCellSize(r)})},socket_syncSession:function(e,t){e.state.session_id!=t&&(e.commit("set_session_id",t),$t.emit("request_model"))},socket_forceSessionId:function(e,t){e.commit("set_session_id",t)},socket_addError:function(e,t){e.commit("add_code_error",t)},socket_addConnection:function(e,t){e.state.canvas.addEdge(t),e.state.code_nodes[t.target_id].inputs[t.target_var]={id:t.source_id,var_name:t.source_var}},socket_setLibraryTree:function(e,t){e.commit("tree_change",t)},socket_changeNodeInputPorts:function(e,t){var o=e.state.canvas,a=e.state.selected_node.cell.id,n=e.state.code_nodes[a].cell;for(var i in e.state.code_nodes[a].inputs={},t)e.state.code_nodes[a].inputs[t[i]]=null;o.changePorts(n,t,0,"input")},socket_changeNodeOutputPorts:function(e,t){var o=e.state.canvas,a=e.state.selected_node.cell.id,n=e.state.code_nodes[a].cell;for(var i in e.state.code_nodes[a].outputs={},t)e.state.code_nodes[a].outputs[t[i]]=null;o.changePorts(n,t,1,"output")},save_node_code:function(e,t){e.state.selected_node.setCode(t.code);var o=e.state.selected_node.id;e.state.node_displays[o].changeCode(t.display_code),e.state.selected_node.setDisplayCode(t.display_code),e.state.node_displays[o].changeAct(t.display_act_code),e.state.selected_node.setDisplayActCode(t.display_act_code),e.state.node_displays[o].updateDisplay(),Se.$emit("update_displays"),a["a"].nextTick().then(function(){var o={};o.code=t.code,o.id=e.state.selected_node.cell.id,$t.emit("edit_node_code",o),e.dispatch("auto_execute")})},add_connection:function(e,t){$t.emit("make_connection",t),e.state.code_nodes[t.target_id].inputs[t.target_var]={id:t.source_id,var_name:t.source_var},e.dispatch("auto_execute")},remove_connection:function(e,t){$t.emit("delete_connection",t),e.dispatch("auto_execute")},execute_server:function(e){e.commit("clear_code_error_list");var t={},o=e.state.node_displays;for(var a in o)t[a]=o[a].scope;$t.emit("execute",t,function(t){e.state.results=t,e.state.run_id+=1,e.state.canvas.addResults(t);var o={};for(var a in e.state.node_displays){var n=e.state.node_displays[a];o[a]=n.scope}e.state.canvas.addScopes(o),Se.$emit("update_displays"),e.dispatch("update_all_cells")})},socket_setResults:function(e,t){t=JSON.parse(t),e.state.results=t,e.state.run_id+=1,e.state.canvas.addResults(t),Se.$emit("update_displays")},socket_setScopes:function(e,t){for(var o in t=JSON.parse(t),e.state.node_displays){var a=e.state.node_displays[o];for(var n in a.scope)"__ob__"!=n&&"__proto__"!=n&&(a.scope[n]=t[o][n])}e.state.run_id+=1,e.state.canvas.addScopes(t),Se.$emit("update_displays")},auto_execute:function(e){e.state.config.auto_exec&&e.dispatch("execute_server")},delete_node:function(e,t){$t.emit("delete_node",t),e.state.node_displays[t].$destroy(),delete e.state.node_displays[t],delete e.state.code_nodes[t]},change_element_color:function(e,t){e.state.canvas.setCellColor(t)},change_element_stroke_size:function(e,t){e.state.canvas.setCellStroke(t)},change_element_dashed:function(e,t){e.state.canvas.setDashed(t)},change_dark_mode:function(e,t){e.commit("set_dark_mode",t),e.state.canvas.updateSyles()},save_config_file:function(e){$t.emit("save_config_file",e.config)}}}),Gt=o("f87c"),Ht=o("85fe"),Kt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{ref:"plot_div"})])},Wt=[],qt={props:["chart"],mounted:function(){Lt.a.plot(this.$refs.plot_div,this.chart.traces,this.chart.layout,{displayModeBar:!1})},watch:{chart:{handler:function(){Lt.a.newPlot(this.$refs[this.chart.uuid],this.chart.traces,this.chart.layout)},deep:!0}}},Jt=qt,Xt=Object(Oe["a"])(Jt,Kt,Wt,!1,null,null,null),Qt=Xt.exports,Zt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("table",{key:e.table_key,staticClass:"pyw-table"},[o("thead",[o("tr",[o("th"),e._l(e.columns,function(t,a){return o("th",{key:a,staticClass:"pyw-table-header"},[o("button",{staticStyle:{"min-width":"0",width:"25px",height:"25px","min-height":"0"},attrs:{color:"grey lighten-2"}},[o("v-icon",{staticStyle:{"font-size":"10px"}},[e._v("\n            close\n          ")])],1)])}),o("th",{staticClass:"pyw-table-header"},[e.enable_column_expand?o("button",{staticStyle:{"min-width":"0",width:"25px",height:"25px","min-height":"0"},attrs:{color:"grey lighten-2"},on:{click:function(t){return e.addColumn()}}},[o("v-icon",{staticStyle:{"font-size":"10px"}},[e._v("\n            add\n          ")])],1):e._e()])],2),o("tr",[o("th"),e._l(e.columns,function(t,a){return o("th",{key:a,staticClass:"pyw-table-header"},[e._v("          \n        Type: "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.column_types[a],expression:"column_types[index]"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.column_types,a,t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"Number",selected:"selected"}},[e._v("Number")]),o("option",{attrs:{value:"Text"}},[e._v("Text")]),o("option",{attrs:{value:"Date"}},[e._v("Date")])])])})],2),o("tr",[o("th",{staticClass:"table-header",staticStyle:{"user-select":"none"}}),e._l(e.columns,function(t,a){return o("Cell",{key:a,attrs:{value:e.columns[a],cell_class:"pyw-table-header"},on:{input:function(t){return e.columnChanged(t,a)}}})}),o("th",{staticClass:"pyw-table-header"})],2)]),o("tbody",e._l(e.value,function(t,a){return o("tr",{key:"row_"+a},[a<e.value.length-1?o("td",{staticClass:"pyw-table-header",staticStyle:{"user-select":"none"}},[o("span",[o("button",{staticStyle:{"min-width":"0",width:"25px",height:"25px","min-height":"0"},attrs:{color:"grey lighten-2"},on:{click:function(t){return e.deleteRow(a)}}},[o("v-icon",{staticStyle:{"font-size":"10px"}},[e._v("close")])],1),e._v("              \n            "+e._s(a)+"\n          ")])]):e._e(),a==e.value.length-1?o("td",{staticClass:"pyw-table-header",staticStyle:{"min-width":"40px","min-height":"30px"}},[o("span")]):e._e(),e._l(e.columns,function(n,i){return o("Cell",{key:"cell_"+a+"_"+i,ref:"cell_"+a+"_"+i,refInFor:!0,attrs:{value:t[i],cell_class:"pyw-table-td"},on:{input:function(t){return e.cellChanged(t,a,i)},focused:function(t){e.selected_cell={i:a,j:i}},paste:function(t){e.parseVal(t,a,i)},focus_lower:function(t){return e.focusLower(a,i)}}})})],2)}),0)])},eo=[],to=(o("28a5"),o("6b54"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("td",{ref:"cell",class:e.comp_cell_class,attrs:{tabindex:"1"},on:{dblclick:e.editing,click:function(t){return e.captureFocus()},blur:function(t){e.is_focused=!1},keydown:function(t){return e.processKeyDown(t)}}},[o("div",{staticStyle:{width:"minmax(100px, auto)"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:0==e.edit,expression:"edit == false"}]},[o("label",{staticStyle:{"user-select":"none"}},[e._v(" "+e._s(e.value))])]),o("input",{directives:[{name:"show",rawName:"v-show",value:1==e.edit,expression:"edit == true"},{name:"model",rawName:"v-model",value:e.cell_input,expression:"cell_input"}],ref:"cellinput",attrs:{type:"text"},domProps:{value:e.cell_input},on:{change:function(t){return e.$emit("input",e.cell_input)},focus:e.focused,blur:function(t){e.edit=!1},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.finishEdit(t)},paste:function(t){return e.onPaste(t)},input:function(t){t.target.composing||(e.cell_input=t.target.value)}}})])])}),oo=[],ao={props:["value","cell_class"],data:function(){return{edit:!1,is_focused:!1,cell_input:this.value}},computed:{comp_cell_class:{get:function(){var e="";return"pyw-table-header"!=this.cell_class&&(e=this.edit||this.is_focused?"selected":"unselected"),this.cell_class+" "+e}}},methods:{focused:function(){},finishEdit:function(e){this.edit=!1,this.$emit("input",this.cell_input),this.$nextTick(function(){this.$emit("focus_lower")})},processKeyDown:function(e){this.is_focused&&!this.edit&&(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=65&&e.keyCode<=90||e.keyCode>=96&&e.keyCode<=105)&&(this.cell_input="",this.editing())},captureFocus:function(){this.edit||(this.$refs.cell.focus(),this.is_focused=!0),this.$emit("focused")},selectCell:function(){this.$nextTick(function(){this.$refs.cell.click()})},editing:function(){this.edit=!0,this.$nextTick(function(){this.$refs.cellinput.focus()})},onPaste:function(e){console.log("pasted"),e.preventDefault();var t=e.clipboardData.getData("text/plain");this.$emit("paste",t)}}},no=ao,io=(o("048e"),Object(Oe["a"])(no,to,oo,!1,null,"8516dd5a",null)),ro=io.exports,so={props:{value:{type:Array},columns:{type:Array},enable_column_expand:{type:Boolean,default:!0}},components:{Cell:ro},data:function(){return{selected_cell:{i:0,j:0},table_key:-1,column_types:[]}},methods:{focusLower:function(e,t){var o="cell_"+(e+1).toString()+"_"+t.toString();this.$refs[o][0].selectCell()},cellChanged:function(e,t,o){this.value[t][o]=e,this.paddFinalRow(),this.redrawTable()},deleteRow:function(e){this.value.splice(e,1),this.redrawTable()},deleteColumn:function(e){},addColumn:function(){var e=1;while(this.columns.indexOf(e.toString())>0)e+=1;this.columns.push(e.toString()),this.redrawTable()},columnChanged:function(e,t){this.columns[t]=e,this.redrawTable()},redrawTable:function(){this.table_key=-1*this.table_key},parseVal:function(e,t,o){this.parseText(e,t,o),this.redrawTable()},parseText:function(e,t,o){for(var a=this.value.length,n=this.columns,i=e.split(/\r?\n/),r=i.length,s=0;s<r;s++){var l=s+t;l>a-1&&(this.value.push([]),a+=1);for(var c=i[s],d=c.split("\t"),u=d.length,_=this.value[l].length,v=0;v<u;v++){var h=o+v;h<=_-1?this.value[l][h]=d[v]:(this.value[l].push(d[v]),_+=1)}_>n&&(n=_)}this.paddFinalRow()},checkForEmptyRow:function(e){for(var t=!0,o=0;o<e.length;o++){e[o].trim().length>0&&(t=!1);break}return t},paddFinalRow:function(){var e=this.value.length;this.value[e-1].length>0&&!this.checkForEmptyRow(this.value[e-1])&&this.value.push([])}}},lo=so,co=(o("faa8"),Object(Oe["a"])(lo,Zt,eo,!1,null,null,null)),uo=co.exports;Ne()(co,{VIcon:E["a"]});o("d5e8"),o("d1e7");a["a"].use(St),a["a"].component("plot",Qt),a["a"].component("grid",uo),a["a"].directive("observe-visibility",Ht["a"]),a["a"].config.productionTip=!1;var _o=new XMLHttpRequest;_o.open("GET","/config.json",!0),_o.timeout=2e3,_o.onload=function(){try{var e=JSON.parse(_o.responseText);Yt.state.config=e}catch(t){}a["a"].use(Gt["a"],$t,{store:Yt}),new a["a"]({store:Yt,render:function(e){return e(gt)}}).$mount("#app")},_o.ontimeout=function(e){a["a"].use(Gt["a"],$t,{store:Yt}),new a["a"]({store:Yt,render:function(e){return e(gt)}}).$mount("#app")},_o.send()},b68c:function(e,t,o){"use strict";var a=o("fe02"),n=o.n(a);n.a},df1d:function(e,t,o){},faa8:function(e,t,o){"use strict";var a=o("df1d"),n=o.n(a);n.a},fe02:function(e,t,o){}});
//# sourceMappingURL=app.6d78c5d6.js.map