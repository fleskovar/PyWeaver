(function(e){function t(t){for(var o,r,s=t[0],l=t[1],c=t[2],u=0,_=[];u<s.length;u++)r=s[u],i[r]&&_.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(_.length)_.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,s=1;s<a.length;s++){var l=a[s];0!==i[l]&&(o=!1)}o&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var o={},i={index:0},n=[];function r(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=o,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var o=a("1356"),i=a.n(o);i.a},"0c10":function(e,t,a){e.exports=a.p+"img/success.0295b738.png"},1:function(e,t){},1356:function(e,t,a){},"2a06":function(e,t,a){e.exports=a.p+"img/warning.a999d80d.png"},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var o=a("a026"),i=a("bb71"),n=a("8336"),r=a("0798"),s=a("c6a6"),l=a("8212"),c=a("4ca6"),d=a("887a"),u=a("288c"),_=a("2bc5"),v=a("a609"),h=a("a4f6"),p=a("b0af"),f=a("5e66"),m=a("ac7c"),g=a("cc20"),y=a("2b5d"),b=a("27e2"),k=a("c377"),w=a("8fea"),x=a("2e4b"),C=a("169a"),S=a("ce7e"),V=a("cd55"),$=a("553a"),D=a("4bd4"),T=a("ce87"),O=a("132d"),E=a("adda"),F=a("b675"),L=a("604c"),N=a("0f8e"),M=a("24c9"),P=a("8860"),R=a("e449"),A=a("8bd2"),I=a("f774"),U=a("de8e"),z=a("891e"),j=a("8dd9"),B=a("8b9c"),Y=a("026c"),H=a("490a"),G=a("8e36"),K=a("43a6"),J=a("5963"),q=a("1d4d"),W=a("6b53"),X=a("b56d"),Q=a("ba0d"),Z=a("2db4"),ee=a("7f2e"),te=a("c73b"),ae=a("7e85"),oe=a("e0c7"),ie=a("b73d"),ne=a("afd9"),re=a("fe57"),se=a("a844"),le=a("2677"),ce=a("8414"),de=a("c964"),ue=a("71d9"),_e=a("3a2f"),ve=a("eb2a"),he=a("f665"),pe=a("c584"),fe=a("3ccf"),me=a("0d3d"),ge=a("acdd"),ye=a("c341");a("da64");o["a"].use(i["a"],{iconfont:"md",components:{VBtn:n["a"],VAlert:r["a"],VAutocomplete:s["a"],VAvatar:l["a"],VBadge:c["a"],VBottomNav:d["a"],VBottomSheet:u["a"],VBreadcrumbs:_["a"],VBtnToggle:v["a"],VCalendar:h["a"],VCard:p["a"],VCarousel:f["a"],VCheckbox:m["a"],VChip:g["a"],VCombobox:y["a"],VCounter:b["a"],VDataIterator:k["a"],VDataTable:w["a"],VDatePicker:x["a"],VDialog:C["a"],VDivider:S["a"],VExpansionPanel:V["a"],VFooter:$["a"],VForm:D["a"],VHover:T["a"],VIcon:O["a"],VImg:E["a"],VInput:F["a"],VItemGroup:L["b"],VJumbotron:N["a"],VLabel:M["a"],VList:P["a"],VMenu:R["a"],VMessages:A["a"],VNavigationDrawer:I["a"],VOverflowBtn:U["a"],VPagination:z["a"],VSheet:j["a"],VParallax:B["a"],VPicker:Y["a"],VProgressCircular:H["a"],VProgressLinear:G["a"],VRadioGroup:K["a"],VRangeSlider:J["a"],VRating:q["a"],VResponsive:W["a"],VSelect:X["a"],VSlider:Q["a"],VSnackbar:Z["a"],VSparkline:ee["a"],VSpeedDial:te["a"],VStepper:ae["a"],VSubheader:oe["a"],VSwitch:ie["a"],VSystemBar:ne["a"],VTabs:re["a"],VTextarea:se["a"],VTextField:le["a"],VTimeline:ce["a"],VTimePicker:de["a"],VToolbar:ue["a"],VTooltip:_e["a"],VTreeview:ve["a"],VWindow:he["a"]},directives:{ClickOutside:pe["a"],Ripple:fe["a"],Resize:me["a"],Scroll:ge["a"],Touch:ye["a"]}});var be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-toolbar",{attrs:{app:"",dark:"",fixed:"","clipped-left":"",flat:""}},[a("v-toolbar-title",{staticClass:"headline text-uppercase"},[a("span",[e._v("Py")]),a("span",{staticClass:"font-weight-light"},[e._v("Weaver")])]),a("v-spacer"),e.connected?a("v-chip",{attrs:{color:"green","text-color":"white"}},[e._v("Connected")]):e._e(),e.connected?e._e():a("v-chip",{attrs:{color:"red","text-color":"white"}},[e._v("Disconnected")])],1),a("input",{attrs:{type:"file",id:"fileInput",hidden:""},on:{change:function(t){return e.OpenModel(t)}}}),a("SideBar"),a("v-content",{staticStyle:{overflow:"hidden"}},[a("v-toolbar",{staticClass:"grey darken-1",attrs:{dark:"",dense:""}},[a("v-item-group",{attrs:{dense:""}},[a("v-btn",{attrs:{flat:"",small:"",icon:""},on:{click:e.OpenFile}},[a("v-icon",[e._v("folder_open")])],1),a("v-btn",{attrs:{flat:"",small:"",icon:""},on:{click:e.SaveModel}},[a("v-icon",[e._v("cloud_download")])],1)],1),a("v-divider",{attrs:{vertical:""}}),a("v-item-group",{attrs:{dense:""}},[a("v-btn",{attrs:{flat:"",icon:"",small:""},on:{click:function(t){return e.runServer()}}},[a("v-icon",{attrs:{small:""}},[e._v("play_arrow")])],1),a("v-btn",{attrs:{flat:"",icon:"",small:""}},[a("v-icon",{attrs:{small:""}},[e._v("pause")])],1),a("v-btn",{attrs:{flat:"",icon:"",small:""},on:{click:e.resetServer}},[a("v-icon",{attrs:{small:""}},[e._v("refresh")])],1)],1)],1),a("v-toolbar",{staticClass:"grey darken-2",attrs:{dark:"",dense:""}},[e._v("          \n                    \n        Outline        \n        "),a("v-item-group",[a("v-btn",{attrs:{flat:"",icon:""},on:{click:function(t){return e.SetDashed(!1)}}},[a("v-icon",[e._v("remove")])],1),a("v-btn",{attrs:{flat:"",icon:""},on:{click:function(t){return e.SetDashed(!0)}}},[a("v-icon",[e._v("more_horiz")])],1)],1),a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[a("v-btn",e._g({attrs:{dark:"",icon:""}},o),[a("v-icon",[e._v("format_color_fill")])],1)]}}])},[a("v-list",{attrs:{dark:""}},e._l(e.colors,function(t,o){return a("v-list-tile",{key:o,on:{click:function(a){return e.SetColor(t.code)}}},[a("v-list-tile-title",[a("v-icon",{attrs:{color:t.code}},[e._v("format_color_fill")])],1)],1)}),1)],1),a("v-overflow-btn",{staticStyle:{width:"50px"},attrs:{items:["1","2","3","5","8"],label:"Stroke size","hide-details":"",overflow:""},on:{change:function(t){return e.SetStrokeSize()}},model:{value:e.stroke_size,callback:function(t){e.stroke_size=t},expression:"stroke_size"}}),a("v-divider",{attrs:{vertical:""}}),a("v-autocomplete",{ref:"search_bar",staticClass:"caption",attrs:{small:"",placeholder:"Node Library Search...","prepend-inner-icon":"library_books",items:e.calc_list,filter:e.nodeLibraryFilter,"return-object":"","auto-select-first":"","menu-props":{value:e.librarySearchMenu,openOnClick:!0,dark:!0,closeOnContentClick:!0,closeOnClick:!0}},on:{change:function(t){return e.librarySearchSelection(e.library_search_val)},blur:function(t){e.librarySearchMenu=!1},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.loseLibrarySearchFocus()}},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v("\n              "+e._s(t.item.name)+"\n          ")]}},{key:"item",fn:function(t){return[[a("v-list-tile-avatar",[a("img",{attrs:{src:t.item.avatar}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.name)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.description)}})],1)]]}}]),model:{value:e.library_search_val,callback:function(t){e.library_search_val=t},expression:"library_search_val"}}),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$socket.emit("refresh_library")}}},[a("v-icon",[e._v("\n            refresh\n          ")])],1)],1),a("v-card",{attrs:{flat:"",height:"100%"}},[a("div",{attrs:{id:"outlineContainer"}}),a("div",{class:e.canvas_color,attrs:{id:"canvas"}})]),a("v-card",{staticStyle:{height:"100px"},attrs:{color:"red"}},[a("div",[e._v("ASDASD")])])],1),a("CodeEditor"),a("LibrarySaveDialog"),a("v-footer",{staticClass:"pa-3",attrs:{app:"",dark:""}},[a("v-spacer"),a("div",[e._v("Â© "+e._s((new Date).getFullYear()))])],1)],1)},ke=[],we=(a("7f7f"),a("6762"),a("2fdb"),a("d225")),xe=a("b0b4"),Ce=new o["a"],Se=a("0c10"),Ve=a.n(Se),$e=a("bb5a"),De=a.n($e),Te=a("7e8b"),Oe=a.n(Te),Ee=a("2a06"),Fe=a.n(Ee),Le=function(){function e(t,a,o){Object(we["a"])(this,e),this.container=t,this.graph={},this.store=o,this.codeNode={},this.outline_container=a}return Object(xe["a"])(e,[{key:"GetModelXML",value:function(){var e=this.graph,t=new mxCodec,a=t.encode(e.getModel()),o=mxUtils.getPrettyXml(a);return o}},{key:"LoadModel",value:function(e){var t=this.graph,a=e,o=mxUtils.parseXml(a),i=o.documentElement,n=new mxCodec(i.ownerDocument);n.decode(i,t.getModel())}},{key:"mount",value:function(){var e=this;mxEvent.disableContextMenu(this.container),mxGraph.prototype.isCellMovable=function(e){if(this.lastEvent.altKey)return!1;var t=this.view.getState(e),a=null!=t?t.style:this.getCellStyle(e);return this.isCellsMovable()&&!this.isCellLocked(e)&&0!=a[mxConstants.STYLE_MOVABLE]},mxGraphHandler.prototype.guidesEnabled=!0,mxEdgeHandler.prototype.snapToTerminals=!0;var t=new mxGraph(this.container);this.graph=t,t.store=this.store;new mxOutline(t,this.outline_container);t.setAllowDanglingEdges(!1),t.setConnectable(!0),t.setMultigraph(!0),t.isCellEditable=function(e){return e.edge},t.isLabelMovable=function(e){return!1},t.isHtmlLabel=function(e){return!e.edge},t.autoSizeCells=!0,t.foldingEnabled=!1,t.setPanning(!0),t.scrollTileSize=new mxRectangle(0,0,400,400),this.calcDefaultStyles();var a=t.getPreferredSizeForCell;t.getPreferredSizeForCell=function(e){var t=a.apply(this,arguments);if(e.edge)return t;var o=document.getElementById("node_"+e.id);return t.width=o.offsetWidth+50,t.height=o.offsetHeight+50,t},mxRubberband.prototype.isForceRubberbandEvent=function(e){return!1},new mxRubberband(t),t.isPort=function(e){this.getCellGeometry(e);return!1},mxEvent.addMouseWheelListener(mxUtils.bind(this,function(e,a){"svg"==e.target.localName&&(1==a?t.zoomIn():t.zoomOut())}));var o=new mxKeyHandler(t);o.bindKey(46,function(e){t.isEnabled()&&t.removeCells()}),t.connectionHandler.addListener(mxEvent.CONNECT,function(t,a){var o=a.getProperty("cell"),i={source_id:o.source.parent.id,target_id:o.target.parent.id,source_var:o.source.value,target_var:o.target.value};e.store.dispatch("add_connection",i)}),t.addListener(mxEvent.DOUBLE_CLICK,function(t,a){var o=a.getProperty("cell"),i=a.getProperty("event");if(null!=o&&"rect"==i.target.localName&&o.isNode){var n=e.store.state.code_nodes[o.id];e.store.dispatch("open_code_editor",n)}}),t.labelChanged=function(e,t,a){if(e.edge){e.value=t;var o={source_id:e.source.parent.id,source_var:e.source.value,target_id:e.target.parent.id,target_var:e.target.value,name:t};this.getView().clear(e,!1,!1),this.getView().validate(),this.cellSizeUpdated(e,!0),this.store.dispatch("rename_connection",o)}},t.addListener(mxEvent.MOUSE_MOVE,function(e,a){t.isMouseDown}),t.addListener(mxEvent.CELLS_REMOVED,function(t,a){for(var o=a.properties.cells,i=0;i<o.length;i++){var n=o[i];if(n.edge){var r={source_id:n.source.parent.id,source_var:n.source.value,target_id:n.target.parent.id,target_var:n.target.value};e.store.dispatch("remove_connection",r)}}for(i=0;i<o.length;i++){n=o[i];n.isNode&&e.store.dispatch("delete_node",n.id)}})}},{key:"addResults",value:function(e){var t=this.graph.getDefaultParent();this.graph.getModel().beginUpdate();try{t.results=JSON.stringify(e)}finally{this.graph.getModel().endUpdate()}}},{key:"addScopes",value:function(e){var t=this.graph.getDefaultParent();this.graph.getModel().beginUpdate();try{t.scopes=JSON.stringify(e)}finally{this.graph.getModel().endUpdate()}}},{key:"addNode",value:function(e){var t=null,a=this.graph.getDefaultParent();this.graph.getModel().beginUpdate();try{var o=e.outputs,i=e.inputs,n=e.id,r=30*Math.max(o.length,i.length)+40;e.height||(e.height=r);t=this.graph.insertVertex(a,n,"",e.x,e.y,e.width,e.height,"verticalAlign=middle");t.value="<div style='border: 1px solid;' id='node_"+t.id+"' class='node_display'></div>",t.display_act_code="",t.setConnectable(!1),t.isNode=!0}finally{this.graph.getModel().endUpdate()}return this.changePorts(t,o,1,"output"),this.changePorts(t,i,0,"input"),t}},{key:"addEdge",value:function(e){for(var t=this.graph,a=t.getDefaultParent(),o=t.getModel(),i=o.cells[e["source_id"]],n=null,r=0;r<i.children.length;r++){var s=i.children[r];if(s.value==e["source_var"]){n=s;break}}var l=o.cells[e["target_id"]],c=null;for(r=0;r<l.children.length;r++){var d=l.children[r];if(d.value==e["target_var"]){c=d;break}}o.beginUpdate();try{t.insertEdge(a,null,"",n,c)}finally{o.endUpdate()}}},{key:"changePorts",value:function(e,t,a,o){var i=this.graph.getModel(),n=[],r=[],s="";s=0==a?"labelPosition=left;verticalLabelPosition=top;align=right;deletable=0":"labelPosition=right;verticalLabelPosition=top;align=left;deletable=0",this.graph.getModel().beginUpdate();try{if(e.children)for(var l=0;l<e.children.length;l++){var c=e.children[l],d=c.value,u=c.tag;t.includes(d)||u!=o?u==o&&(r.push(c),n.push(d)):(this.graph.removeCells(i.getEdges(c),!1),this.graph.removeCells([c],!1),l-=1)}for(l=0;l<t.length;l++){d=t[l];if(n.includes(d)){_=r[l];_.geometry.y=1/(t.length+1)*(l+1)}else{var _=this.graph.insertVertex(e,null,d,a,1/(t.length+1)*(l+1),10,10,s,!0);_.geometry.offset=new mxPoint(-5,-5),_.setConnectable(!0),_.tag=o}}this.graph.getView().validate()}finally{this.graph.getModel().endUpdate()}}},{key:"updateCell",value:function(e){this.graph.getView().clear(e,!1,!1),this.graph.getView().validate(),this.graph.cellSizeUpdated(e,!0)}},{key:"updateCellSize",value:function(e){this.graph.cellSizeUpdated(e,!0)}},{key:"setCellColor",value:function(e){for(var t=this.graph.selectionModel.cells,a=0;a<t.length;a++){var o=t[a],i=o.getStyle(),n=mxUtils.setStyle(i,mxConstants.STYLE_STROKECOLOR,e);this.graph.setCellStyle(n,[o])}}},{key:"setCellStroke",value:function(e){for(var t=this.graph.selectionModel.cells,a=0;a<t.length;a++){var o=t[a],i=o.getStyle(),n=mxUtils.setStyle(i,mxConstants.STYLE_STROKEWIDTH,e);this.graph.setCellStyle(n,[o])}}},{key:"setDashed",value:function(e){for(var t=0,a=this.graph.selectionModel.cells,o=0;o<a.length;o++){var i=a[o],n=i.getStyle();e&&(t=1);var r=mxUtils.setStyle(n,mxConstants.STYLE_DASHED,t);this.graph.setCellStyle(r,[i])}}},{key:"calcDefaultStyles",value:function(){var e=this.graph;if(this.store.state.config.dark_mode){var t=e.getStylesheet().getDefaultVertexStyle();t["fillColor"]="#212121",t["strokeColor"]="#FFFFFF",t["fontColor"]="#FFFFFF",t["fontStyle"]="1",t=e.getStylesheet().getDefaultEdgeStyle(),t["strokeColor"]="#FFFFFF",t["fontColor"]="#FFFFFF",t["fontStyle"]="0",t["fontStyle"]="0",t["startSize"]="8",t["endSize"]="8",t[mxConstants.STYLE_ROUNDED]=!0,t[mxConstants.STYLE_EDGE]=mxEdgeStyle.OrthConnector,t[mxConstants.STYLE_STROKEWIDTH]="1",t[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR]="#212121"}else{t=e.getStylesheet().getDefaultVertexStyle();t["fillColor"]="#FFFFFF",t["strokeColor"]="#000000",t["fontColor"]="#000000",t["fontStyle"]="1",t=e.getStylesheet().getDefaultEdgeStyle(),t["strokeColor"]="#000000",t["fontColor"]="#000000",t["fontStyle"]="0",t["fontStyle"]="0",t["startSize"]="8",t["endSize"]="8",t[mxConstants.STYLE_ROUNDED]=!0,t[mxConstants.STYLE_EDGE]=mxEdgeStyle.OrthConnector,t[mxConstants.STYLE_STROKEWIDTH]="1",t[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR]="#FFFFFF"}}},{key:"updateSyles",value:function(){this.calcDefaultStyles()}},{key:"setOverlay",value:function(e,t){var a=null,o="";"ok"==t?(o="Calculation succeeded",a=new mxImage(Ve.a,16,16)):"error"==t?(o="Error",a=new mxImage(De.a,16,16)):"warning"==t?(o="Not enough inputs",a=new mxImage(Fe.a,16,16)):(o="Executing...",a=new mxImage(Oe.a,16,16));var i=new mxCellOverlay(a,o);this.graph.addCellOverlay(e,i)}},{key:"removeOverlay",value:function(e){this.graph.removeCellOverlays(e)}}]),e}(),Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"800",persistent:""},on:{keydown:e.codeDialogShortcuts},model:{value:e.code_dialog,callback:function(t){e.code_dialog=t},expression:"code_dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"gray"}},[a("v-toolbar-title",[e._v("Editor")]),a("v-btn",{attrs:{icon:""},on:{click:e.openSaveDialog}},[a("v-icon",[e._v("save")])],1),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[a("v-icon",[e._v("close")])],1)],1)],1),a("v-card-text",[a("v-tabs",{attrs:{dark:""}},[a("v-tab",[e._v("Code")]),a("v-tab-item",[a("codemirror",{ref:"code_editor",attrs:{options:e.cmOptions},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),a("v-card",{key:e.bug_key,attrs:{dark:""}},[e._v(e._s(e.error_text))])],1),a("v-tab",[e._v("Display")]),a("v-tab-item",[a("codemirror",{ref:"ui_editor",attrs:{options:e.dispCmOptions},model:{value:e.display_code,callback:function(t){e.display_code=t},expression:"display_code"}})],1),a("v-tab",[e._v("Display Actions")]),a("v-tab-item",[a("codemirror",{ref:"script_editor",attrs:{options:e.dispActCmOptions},model:{value:e.display_act_code,callback:function(t){e.display_act_code=t},expression:"display_act_code"}})],1)],1),a("v-spacer")],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green",flat:"",dark:""},on:{click:e.saveCode}},[e._v("Update")])],1)],1)],1)},Me=[],Pe=(a("a7be"),a("db91"),a("8c2e"),a("d69f"),a("f9d4"),a("8f94")),Re={components:{codemirror:Pe["codemirror"]},mounted:function(){var e=this;window.setInterval(function(){e.updateEditors()},250)},data:function(){return{bug_key:-1,cmOptions:{tabSize:4,indentUnit:4,mode:"python",lineNumbers:!0,viewportMargin:1/0,line:!0,theme:"base16-dark",autoRefresh:!0},dispCmOptions:{tabSize:4,indentUnit:4,mode:"htmlmixed",lineNumbers:!0,viewportMargin:1/0,line:!0,theme:"base16-dark",autoRefresh:!0},dispActCmOptions:{tabSize:4,indentUnit:4,mode:"javascript",lineNumbers:!0,viewportMargin:1/0,line:!0,theme:"base16-dark",autoRefresh:!0},has_error:!1}},methods:{bugHighlight:function(){if(this.bug_key=-1*this.bug_key,-1!=this.error_line){var e=this.error_line-1;this.$refs.code_editor.cminstance.addLineClass(e,"background","line-error"),this.$refs.code_editor.codemirror.refresh()}},bugUnHighlight:function(){if(-1!=this.error_line){var e=this.error_line-1;this.$refs.code_editor.cminstance.removeLineClass(e,"background","line-error")}},updateEditors:function(){this.code_dialog&&(this.$refs.code_editor.codemirror&&this.$refs.code_editor.codemirror.refresh(),this.$refs.ui_editor.codemirror&&this.$refs.ui_editor.codemirror.refresh(),this.$refs.script_editor.codemirror&&this.$refs.script_editor.codemirror.refresh())},closeDialog:function(){this.bugUnHighlight(),this.code_dialog=!1},openSaveDialog:function(){this.$store.commit("set_dialog_open",!0)},saveCode:function(){this.$store.dispatch("save_node_code",{code:this.code,display_code:this.display_code,display_act_code:this.display_act_code}),this.closeDialog()},codeDialogShortcuts:function(e){this.code_dialog&&(13===e.keyCode&&e.shiftKey?this.saveCode():27===e.keyCode&&this.closeDialog())}},computed:{error_line:{get:function(){var e=this.$store.state.selected_node.id;return e&&this.$store.state.code_error_dict[e]?this.$store.state.code_error_dict[e].line:-1}},error_text:{get:function(){var e=this.$store.state.selected_node.id;return e&&this.$store.state.code_error_dict[e]?this.$store.state.code_error_dict[e].error:"Error text"}},code:{get:function(){return this.$store.state.code},set:function(e){this.$store.commit("set_code",e)}},display_code:{get:function(){return this.$store.state.display_code},set:function(e){this.$store.commit("set_display_code",e)}},display_act_code:{get:function(){return this.$store.state.display_act_code},set:function(e){this.$store.commit("set_display_act_code",e)}},code_dialog:{get:function(){return this.$store.state.open_code_editor},set:function(e){this.$store.commit("open_editor",e)}}},watch:{code_dialog:function(e,t){e&&this.bugHighlight()}}},Ae=Re,Ie=(a("b68c"),a("2877")),Ue=a("6544"),ze=a.n(Ue),je=a("99d9"),Be=a("9910"),Ye=a("71a3"),He=a("c671"),Ge=a("2a7f"),Ke=Object(Ie["a"])(Ae,Ne,Me,!1,null,null,null),Je=Ke.exports;ze()(Ke,{VBtn:n["a"],VCard:p["a"],VCardActions:je["a"],VCardText:je["b"],VDialog:C["a"],VIcon:O["a"],VSpacer:Be["a"],VTab:Ye["a"],VTabItem:He["a"],VTabs:re["a"],VToolbar:ue["a"],VToolbarItems:Ge["a"],VToolbarTitle:Ge["b"]});var qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-navigation-drawer",{attrs:{permanent:"",clipped:"",dark:"",app:"",width:"300","mini-variant":e.drawer_mini}},[a("v-list",[a("v-list-tile",[a("v-list-tile-content"),a("v-list-tile-action",{on:{click:e.toggleMiniDrawer}},[a("v-btn",{attrs:{icon:""}},[e.drawer_mini?a("v-icon",[e._v("keyboard_arrow_right")]):e._e(),e.drawer_mini?e._e():a("v-icon",[e._v("keyboard_arrow_left")])],1)],1)],1),a("v-list-tile",[a("v-list-tile-content",[a("br"),a("br"),a("v-text-field",{attrs:{label:"Document name"},model:{value:e.document_name,callback:function(t){e.document_name=t},expression:"document_name"}}),a("br")],1)],1),a("v-divider"),a("v-list-tile",{on:{click:e.addNode}},[a("v-list-tile-action",[a("v-btn",{staticClass:"text-lg-right",attrs:{icon:""}},[a("v-icon",[e._v("add")])],1)],1),a("v-list-tile-content",[e._v("ADD EMPTY NODE")])],1),a("v-divider"),a("v-list-tile",{on:{click:function(t){e.drawer_mini=!1}}},[a("v-list-tile-action",[a("v-btn",{staticClass:"text-lg-right",attrs:{icon:""}},[a("v-icon",[e._v("library_books")])],1)],1),a("v-list-tile-content",[e._v("Node Library")])],1),a("v-card",{directives:[{name:"show",rawName:"v-show",value:!e.drawer_mini,expression:"!drawer_mini"}],staticStyle:{padding:"20px","overflow-y":"scroll"},attrs:{height:"300px",flat:""}},[a("v-treeview",{ref:"tree",attrs:{items:e.items,"open-on-click":""},scopedSlots:e._u([{key:"prepend",fn:function(t){var o=t.item;return[o.children?a("v-icon",[e._v("folder")]):e._e(),o.children?e._e():a("v-icon",[e._v("insert_drive_file")])]}},{key:"label",fn:function(t){var o=t.item;return[a("span",{on:{dblclick:function(t){return e.addLibraryNode(o.lib_id)}}},[e._v(e._s(o.name))]),0==o.id?a("v-btn",{attrs:{icon:""},on:{click:e.refreshLibrary}},[a("v-icon",[e._v("refresh")])],1):e._e()]}}])})],1),a("v-divider"),a("v-list-tile",{on:{click:function(t){e.showOptionsDialog=!0}}},[a("v-list-tile-action",[a("v-btn",{staticClass:"text-lg-right",attrs:{icon:""},on:{click:function(t){e.showOptionsDialog=!0}}},[a("v-icon",[e._v("settings")])],1)],1),a("v-list-tile-content",[e._v("SETTINGS")])],1)],1),a("OptionsDialog",{on:{close:function(t){e.showOptionsDialog=!1}},model:{value:e.showOptionsDialog,callback:function(t){e.showOptionsDialog=t},expression:"showOptionsDialog"}})],1)},We=[],Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"800",persistent:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"gray"}},[a("v-toolbar-title",[e._v("Options")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",[e._v("close")])],1)],1)],1),a("v-card-text",[a("v-checkbox",{attrs:{label:"Automatically run flowsheet"},model:{value:e.autoRun,callback:function(t){e.autoRun=t},expression:"autoRun"}}),a("v-checkbox",{attrs:{label:"Automatically sync model"},model:{value:e.autoSync,callback:function(t){e.autoSync=t},expression:"autoSync"}}),a("v-checkbox",{attrs:{label:"Dark Mode (requires page reload)"},model:{value:e.darkMode,callback:function(t){e.darkMode=t},expression:"darkMode"}})],1)],1)],1)},Qe=[],Ze={props:["value"],data:function(){return{}},computed:{autoRun:{get:function(){return this.$store.state.config.auto_exec},set:function(e){this.$store.commit("set_auto_exec",e),this.$store.dispatch("save_config_file")}},autoSync:{get:function(){return this.$store.state.config.sync_model},set:function(e){this.$store.commit("set_auto_sync",e),this.$store.dispatch("save_config_file")}},darkMode:{get:function(){return this.$store.state.config.dark_mode},set:function(e){this.$store.dispatch("change_dark_mode",e),this.$store.dispatch("sync_model_with_server"),this.$store.dispatch("save_config_file")}}}},et=Ze,tt=Object(Ie["a"])(et,Xe,Qe,!1,null,null,null),at=tt.exports;ze()(tt,{VBtn:n["a"],VCard:p["a"],VCardText:je["b"],VCheckbox:m["a"],VDialog:C["a"],VIcon:O["a"],VSpacer:Be["a"],VToolbar:ue["a"],VToolbarItems:Ge["a"],VToolbarTitle:Ge["b"]});var ot={components:{OptionsDialog:at},mounted:function(){},data:function(){return{drawer_mini:!0,showOptionsDialog:!1}},methods:{addNode:function(){this.$socket.emit("new_empty_node")},refreshLibrary:function(){this.$socket.emit("refresh_library")},resetServer:function(){this.$socket.emit("reset")},toggleMiniDrawer:function(){this.drawer_mini=!this.drawer_mini},addLibraryNode:function(e){this.$socket.emit("load_node",e)}},computed:{items:{get:function(){return this.$store.state.libraryTree}},document_name:{get:function(){return this.$store.state.document_name},set:function(e){this.$store.commit("set_document_name",e)}}}},it=ot,nt=a("ba95"),rt=a("40fe"),st=a("5d23"),lt=Object(Ie["a"])(it,qe,We,!1,null,null,null),ct=lt.exports;ze()(lt,{VBtn:n["a"],VCard:p["a"],VDivider:S["a"],VIcon:O["a"],VList:P["a"],VListTile:nt["a"],VListTileAction:rt["a"],VListTileContent:st["a"],VNavigationDrawer:I["a"],VTextField:le["a"],VTreeview:ve["a"]});var dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"800",persistent:""},model:{value:e.save_dialog,callback:function(t){e.save_dialog=t},expression:"save_dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"gray"}},[a("v-toolbar-title",[e._v("Save to Library")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[a("v-icon",[e._v("close")])],1)],1)],1),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticStyle:{"overflow-y":"scroll",border:"2px solid grey","border-radius":"1px"},attrs:{height:"500px",flat:""}},[a("v-treeview",{ref:"tree",attrs:{items:e.libraryTree,activatable:"",active:e.selected_folder,"return-object":""},on:{"update:active":function(t){e.selected_folder=t}},scopedSlots:e._u([{key:"prepend",fn:function(t){var o=t.item;return[a("div",{on:{click:function(t){e.hover_tree_id=o.id}}},[o.children?a("v-icon",[e._v("folder")]):e._e(),o.children?e._e():a("v-icon",[e._v("insert_drive_file")])],1)]}},{key:"label",fn:function(t){var o=t.item;return[a("div",{on:{click:function(t){e.hover_tree_id=o.id}}},[e._e(),a("span",[e._v(e._s(o.name))]),e._v("\n                                                â\n                                                "),a("a",[o.id==e.hover_tree_id?a("v-icon",{on:{click:function(t){return e.openEditNameDialog(o)}}},[e._v("edit")]):e._e()],1),a("a",[o.id==e.hover_tree_id&&o.children?a("v-icon",{on:{click:function(t){return e.openNewFolderDialog(o)}}},[e._v("create_new_folder")]):e._e()],1),a("a",[o.id==e.hover_tree_id?a("v-icon",{on:{click:function(t){return e.openDeleteFolderDialog(o)}}},[e._v("delete_forever")]):e._e()],1)],1)]}}])})],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-card",{attrs:{flat:"",height:"500px"}},[a("v-text-field",{attrs:{label:"Node Template Name",rules:[e.rules.required],clearable:""},model:{value:e.save_name,callback:function(t){e.save_name=t},expression:"save_name"}}),a("v-textarea",{attrs:{label:"Node Description","no-resize":"",outline:""},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),a("v-textarea",{attrs:{label:"Search keywords",hint:"Comma separated keywords","no-resize":"",outline:"","persistent-hint":""},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue",flat:"",dark:""},on:{click:e.saveNode}},[e._v("Save")])],1)],1),a("v-dialog",{attrs:{width:"500px"},model:{value:e.add_folder_dialog,callback:function(t){e.add_folder_dialog=t},expression:"add_folder_dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"gray"}},[a("v-toolbar-title",[e._v("New Folder")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.add_folder_dialog=!1}}},[a("v-icon",[e._v("close")])],1)],1)],1),a("v-card-text",[a("v-text-field",{attrs:{label:"New Folder Name",rules:[e.rules.required]},model:{value:e.new_folder_name,callback:function(t){e.new_folder_name=t},expression:"new_folder_name"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"green",flat:"",dark:""},on:{click:e.createNewFolder}},[e._v("Create")]),a("v-spacer"),a("v-btn",{attrs:{color:"red",flat:"",dark:""},on:{click:function(t){e.add_folder_dialog=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{width:"500px"},model:{value:e.delete_folder_dialog,callback:function(t){e.delete_folder_dialog=t},expression:"delete_folder_dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"gray"}},[a("v-toolbar-title",[e._v("Delete Folder?")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.delete_folder_dialog=!1}}},[a("v-icon",[e._v("close")])],1)],1)],1),a("v-card-text",[e._v("\n                    Are you sure you want to permanently delete the folder and all the content inside?\n                ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"blue",flat:"",dark:""},on:{click:e.deleteFolder}},[e._v("Yes, Delete It")]),a("v-spacer"),a("v-btn",{attrs:{color:"blue",flat:"",dark:""},on:{click:function(t){e.delete_folder_dialog=!1}}},[e._v("No")])],1)],1)],1),a("v-dialog",{attrs:{width:"500px"},model:{value:e.edit_name_dialog,callback:function(t){e.edit_name_dialog=t},expression:"edit_name_dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"gray"}},[a("v-toolbar-title",[e._v("Edit Name")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.edit_name_dialog=!1}}},[a("v-icon",[e._v("close")])],1)],1)],1),a("v-card-text",[a("v-text-field",{attrs:{label:"New Name",rules:[e.rules.required]},model:{value:e.new_item_name,callback:function(t){e.new_item_name=t},expression:"new_item_name"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"green",flat:"",dark:""},on:{click:e.renameItem}},[e._v("Rename")]),a("v-spacer"),a("v-btn",{attrs:{color:"red",flat:"",dark:""},on:{click:function(t){e.edit_name_dialog=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},ut=[],_t={data:function(){return{selected_folder:[],rename_dialog:!1,name_dialog:!1,save_name:"New Template",rules:{required:function(e){return!!e||"Required."}},hover_tree_id:-1,add_folder_dialog:!1,delete_folder_dialog:!1,edit_name_dialog:!1,selected_item:{},new_folder_name:"New Folder",new_item_name:"",description:"Short description of what the node does.",keywords:""}},methods:{closeDialog:function(){this.description="Short description of what the node does.",this.$store.commit("set_dialog_open",!1)},saveNode:function(){if(this.save_name){var e={overwrite:!1},t=!0;if(this.selected_folder[0].lib_id&&(t=confirm("Overwrite existing module?"),e.overwrite=!0),t){var a=this.$store.state.selected_node,o={};o.name=this.save_name,o.code=a.code,o.display_code=a.display_code,o.display_act_code=a.display_act_code;var i={description:this.description,keywords:this.keywords,test_vals:"",connections:""};o.meta=JSON.stringify(i);var n=this.selected_folder[0].path;e.path=n,e.node_data=o,this.$socket.emit("save_to_library",e),this.closeDialog()}}},openNewFolderDialog:function(e){this.selected_item=e,this.new_folder_name="New Folder",this.add_folder_dialog=!0},openDeleteFolderDialog:function(e){this.selected_item=e,this.delete_folder_dialog=!0},openEditNameDialog:function(e){this.selected_item=e,this.new_item_name=e.name,this.edit_name_dialog=!0},createNewFolder:function(){var e={path:this.selected_item.path,name:this.new_folder_name};this.$socket.emit("new_folder",e),this.add_folder_dialog=!1},deleteFolder:function(){var e=this.selected_item.path;this.$socket.emit("delete_folder",e),this.delete_folder_dialog=!1},renameItem:function(){var e={path:this.selected_item.path,name:this.new_item_name};this.$socket.emit("rename_folder",e),this.edit_name_dialog=!1}},computed:{save_dialog:{get:function(){return this.$store.state.save_dialog}},libraryTree:{get:function(){return this.$store.state.libraryTree}}}},vt=_t,ht=a("a523"),pt=a("0e8f"),ft=a("a722"),mt=Object(Ie["a"])(vt,dt,ut,!1,null,null,null),gt=mt.exports;ze()(mt,{VBtn:n["a"],VCard:p["a"],VCardActions:je["a"],VCardText:je["b"],VContainer:ht["a"],VDialog:C["a"],VFlex:pt["a"],VIcon:O["a"],VLayout:ft["a"],VSpacer:Be["a"],VTextField:le["a"],VTextarea:se["a"],VToolbar:ue["a"],VToolbarItems:Ge["a"],VToolbarTitle:Ge["b"],VTreeview:ve["a"]});var yt=a("bbd6"),bt=a.n(yt),kt={name:"App",components:{CodeEditor:Je,SideBar:ct,LibrarySaveDialog:gt},data:function(){return{toggle_exclusive:2,colors:[{code:"#F44336",color:"red"},{code:"#2196F3",color:"blue"},{code:"#4CAF50",color:"green"},{code:"#FFFFFF",color:"white"},{code:"#FFEB3B",color:"yellow"},{code:"#E91E63",color:"pink"}],stroke_size:"",showOptionsDialog:!1,library_search_val:null,librarySearchMenu:!1,library_sort:null,connected:!1}},mounted:function(){var e=this,t=document.getElementById("canvas"),a=document.getElementById("outlineContainer"),o=new Le(t,a,this.$store);o.mount(),this.$store.commit("set_canvas",o),Ce.$on("update_displays",this.updateCanvas),this.library_sort=bt.a.new(),window.setInterval(function(){e.PushModel()},3e4);var i=this;window.addEventListener("keyup",function(e){"input"!=e.target.localName&&"textarea"!=e.target.localName&&("mxCellEditor mxPlainTextEditor"==e.target.className?13===e.keyCode&&e.target.blur():32==e.keyCode?i.captureSearchFocus():13===e.keyCode&&e.shiftKey&&i.runServer())}),this.$socket.emit("refresh_library"),this.connected=this.$socket.connected},methods:{loseLibrarySearchFocus:function(){var e=this;this.$refs.search_bar.blur(),this.$nextTick(function(){e.library_search_val=!1,e.librarySearchMenu=!1})},runServer:function(){this.$store.dispatch("execute_server")},librarySearchSelection:function(e){var t=this;e&&e.hasOwnProperty("lib_id")&&(this.$socket.emit("load_node",e.lib_id),this.$nextTick(function(){t.library_search_val=null}))},nodeLibraryFilter:function(e,t,a){if(e){var o=this.library_sort.single(t,e.name);return!!o}return!0},captureSearchFocus:function(){this.$refs.search_bar.focus(),this.library_search_val=null,this.librarySearchMenu=!0},SetDashed:function(e){this.$store.dispatch("change_element_dashed",e)},SetStrokeSize:function(){this.$store.dispatch("change_element_stroke_size",this.stroke_size)},SetColor:function(e){this.$store.dispatch("change_element_color",e)},PushModel:function(){this.$store.dispatch("push_server_model")},OpenFile:function(){var e=document.getElementById("fileInput");e.click()},OpenModel:function(e){var t=this,a=e.target.files[0];if(a){var o=new FileReader;o.onload=function(e){var a=e.target.result;t.$socket.emit("load_model",a)},o.readAsText(a)}},resetServer:function(){var e=!1;e=confirm("Reset server? This will erase all unsaved data"),e&&this.$socket.emit("reset")},SaveModel:function(){var e=this.$store.state.canvas.GetModelXML(),t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e));var a=this.$store.state.document_name+".xml";t.setAttribute("download",a),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},updateCanvas:function(){this.$store.dispatch("update_all_cells")}},computed:{document_name:{get:function(){return this.$store.state.document_name}},calc_list:{get:function(){return this.$store.state.calcs_list}},canvas_color:{get:function(){return this.$store.state.config.dark_mode?"grey darken-4":"white"}}},sockets:{connect:function(){this.connected=!0,this.$socket.emit("refresh_library")},disconnect:function(){this.connected=!1}}},wt=kt,xt=(a("034f"),a("7496")),Ct=a("549c"),St=a("c954"),Vt=Object(Ie["a"])(wt,be,ke,!1,null,null,null),$t=Vt.exports;ze()(Vt,{VApp:xt["a"],VAutocomplete:s["a"],VBtn:n["a"],VCard:p["a"],VChip:g["a"],VContent:Ct["a"],VDivider:S["a"],VFooter:$["a"],VIcon:O["a"],VItemGroup:L["b"],VList:P["a"],VListTile:nt["a"],VListTileAvatar:St["a"],VListTileContent:st["a"],VListTileSubTitle:st["b"],VListTileTitle:st["c"],VMenu:R["a"],VOverflowBtn:U["a"],VSpacer:Be["a"],VToolbar:ue["a"],VToolbarTitle:Ge["b"]});var Dt=a("2f62"),Tt="node_id",Ot="is_variable",Et="param_name",Ft="PyWeaverNodeDisplay",Lt={DISPLAY_NODE_ID_ATTR:Tt,DISPLAY_VAR_ATTR:Ot,DISPLAY_VAR_NAME_ATTR:Et,DISPLAY_CLASS:Ft},Nt=function(){function e(t,a,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(we["a"])(this,e),this.canvas=a,this.id=i||null,this.inputs={},this.outputs={},this.code_source="local",this.code="",this.display_code=t,this.display_act_code="",this.cell_id="",this.cell={},this.compiled_display_code="",this.compileDisplayCode(),this.store=o,this.x=20,this.y=20,this.width=100,this.height=null}return Object(xe["a"])(e,[{key:"setCell",value:function(e){this.cell=e,this.id=e.id}},{key:"compileDisplayCode",value:function(){this.compiled_display_code="<div "+Lt.DISPLAY_NODE_ID_ATTR+"='"+this.cell.id+"' class='"+Lt.DISPLAY_CLASS+"'id='node_"+this.cell.id+"'>"+this.display_code+"</div>"}},{key:"setCode",value:function(e){this.code=e,this.cell.code=e}},{key:"setDisplayCode",value:function(e){this.display_code=e,this.compileDisplayCode(),this.cell.display_code=e}},{key:"setDisplayActCode",value:function(e){this.display_act_code=e,this.cell.display_act_code=e}}]),e}(),Mt=a("8055"),Pt=a.n(Mt),Rt=Pt()("http://localhost:5000"),At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{key:e.run_id},[a("v-runtime-template",{attrs:{template:e.template,display_code:e.display_code}})],1)},It=[],Ut=(a("ac6a"),a("456d"),a("75fc")),zt={bind:function(e,t,a){a.context["scope"][t.arg]||(a.context["scope"][t.arg]=t.value)}};o["a"].directive("val",zt);var jt=a("61cc"),Bt=a.n(jt),Yt=function(e){return[].concat(Object(Ut["a"])(Object.keys(e.data&&e.data()||{})),Object(Ut["a"])(Object.keys(e.props||{})))},Ht=function(e,t,a){if(!t.hasOwnProperty(a)){var o=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,o)}},Gt=function(e){var t={};return e.forEach(function(e){e&&Object.getOwnPropertyNames(e).forEach(function(a){return Ht(e,t,a)})}),t},Kt=function(e,t){var a={};return t.forEach(function(t){return Ht(e,a,t)}),a},Jt={props:{template:String,display_code:String},directives:{Val:zt},data:function(){return{plotly:Bt.a}},render:function(e){if(this.template){var t=this.$parent,a=t.$data,o=t.$props,i=t.$options,n="{}";if(this.display_code&&(n=this.display_code),n!=this.$parent.$data._previous_display_code){var r="function(){return "+this.$parent.$data._previous_display_code+" }();",s=Function("return "+r)();for(var l in s)delete i.methods[l],delete this.$parent[l];this.$parent.$data._previous_display_code=n,r="function(){return "+n+" }();";var c=Function("return "+r)();for(var l in c){var d=c[l].bind(this.$parent);i.methods[l]=d,this.$parent[l]=d}}this.$parent.$data._previous_template!=this.template&&(this.$parent.$data.scope={},this.$parent.$data._previous_template=this.template);var u=Object.keys(i.methods||{}),_=Yt(i).concat(u),v=Kt(this.$parent,u),h=Gt([a,o,v]),p={template:this.template||"<div></div>",props:_,computed:i.computed,components:i.components};return e(p,{props:h})}}},qt={props:["_node","store"],data:function(){return{id:"",template:"<div>Node</div>",display_code:"{}",scope:{},node:{},_previous_template:"",_previous_display_code:"{}"}},components:{VRuntimeTemplate:Jt},directives:{Val:zt},methods:{changeCode:function(e){this.template="<div>"+e+"</div>"},changeAct:function(e){this.display_code=e},updateDisplay:function(){this.$forceUpdate(),this.onResults&&this.onResults()}},computed:{run_id:function(){return this.store.state.run_id}},mounted:function(){this.node=new Proxy(this._node,{get:function(e,t,a){var o=null;if("__ob__"!=t){var i=null,n=null;if(t in e.inputs){console.log("input request");var r=e.inputs[t];r&&(i=r.id,n=r.var_name)}else i=e.id,n=t;i&&n&&i in e.store.state.results&&n in e.store.state.results[i]&&(o=e.store.state.results[i][n])}return o}})}},Wt=qt,Xt=Object(Ie["a"])(Wt,At,It,!1,null,null,null),Qt=Xt.exports;o["a"].use(Dt["a"]);var Zt=new Dt["a"].Store({state:{canvas:{},selected_node:{},open_code_editor:!1,code:"",display_code:"",display_act_code:"",code_nodes:{},document_name:"Untitled",node_displays:{},results:{},config:{auto_exec:!0,sync_model:!0,dark_mode:!1},run_id:0,libraryTree:[],save_dialog:!1,session_id:null,code_error_dict:{},code_parse_error_list:[],calcs_list:[]},mutations:{calc_list_change:function(e,t){e.calcs_list=t},add_code_error:function(e,t){e.code_error_dict[t.id]={line:t.line,type:t.error_tyoe,error:t.error}},clear_code_error_list:function(e){e.code_error_dict={}},set_dark_mode:function(e,t){e.config.dark_mode=t},set_auto_exec:function(e,t){e.config.auto_exec=t},set_sync_model:function(e,t){e.config.sync_model=t},tree_change:function(e,t){e.libraryTree=t},set_selected_node:function(e,t){e.selected_node=t},open_editor:function(e,t){e.open_code_editor=t},set_dialog_open:function(e,t){e.save_dialog=t},set_canvas:function(e,t){e.canvas=t},set_code:function(e,t){e.code=t},set_display_code:function(e,t){e.display_code=t},set_display_act_code:function(e,t){e.display_act_code=t},set_document_name:function(e,t){e.document_name=t},set_session_id:function(e,t){e.session_id=t}},actions:{update_all_cells:function(e){var t=e.state.canvas.graph;for(var a in e.state.code_nodes){var o=e.state.code_nodes[a].cell;t.updateCellSize(o,!0)}},push_server_model:function(e){e.state.config.sync_model&&e.dispatch("sync_model_with_server")},sync_model_with_server:function(e){var t={};t.session_id=e.state.session_id,t.xml=e.state.canvas.GetModelXML(),Rt.emit("sync_model",t)},open_code_editor:function(e,t){e.commit("set_selected_node",t),e.commit("set_code",t.code),e.commit("set_display_code",t.display_code),e.commit("set_display_act_code",t.display_act_code),e.commit("open_editor",!0)},socket_addNode:function(e,t){var a=e.state.canvas,i=t["id"],n=new Nt("Node",e.state.canvas,e,i);n.inputs=t["input_port_names"],n.outputs=t["out_port_names"],t["x"]&&t["y"]&&t["width"]&&t["height"]&&(n.x=t["x"],n.y=t["y"],n.width=t["width"],n.height=t["height"]);var r=a.addNode(n),s=r.id,l=o["a"].extend(Qt),c=new l({propsData:{_node:n,store:e}});n.setCell(r),n.setCode(t.code),c.changeCode(t.display_code),n.setDisplayCode(t.display_code),c.changeAct(t.display_act_code),n.setDisplayActCode(t.display_act_code),c.$mount(),document.getElementById("node_"+s).appendChild(c.$el),e.state.node_displays[r.id]=c,e.state.code_nodes[r.id]=n,o["a"].nextTick().then(function(){a.updateCellSize(r)})},socket_syncSession:function(e,t){e.state.session_id!=t&&(e.commit("set_session_id",t),Rt.emit("request_model"))},socket_forceSessionId:function(e,t){e.commit("set_session_id",t)},socket_addError:function(e,t){e.commit("add_code_error",t)},socket_addConnection:function(e,t){e.state.canvas.addEdge(t),e.state.code_nodes[t.target_id].inputs[t.target_var]={id:t.source_id,var_name:t.source_var}},socket_setLibraryTree:function(e,t){e.commit("tree_change",t.tree),e.commit("calc_list_change",t.calcs)},socket_changeNodeInputPorts:function(e,t){var a=e.state.canvas,o=e.state.selected_node.cell.id,i=e.state.code_nodes[o].cell;for(var n in e.state.code_nodes[o].inputs={},t)e.state.code_nodes[o].inputs[t[n]]=null;a.changePorts(i,t,0,"input")},socket_changeNodeOutputPorts:function(e,t){var a=e.state.canvas,o=e.state.selected_node.cell.id,i=e.state.code_nodes[o].cell;for(var n in e.state.code_nodes[o].outputs={},t)e.state.code_nodes[o].outputs[t[n]]=null;a.changePorts(i,t,1,"output")},save_node_code:function(e,t){e.state.selected_node.setCode(t.code);var a=e.state.selected_node.id;e.state.node_displays[a].changeCode(t.display_code),e.state.selected_node.setDisplayCode(t.display_code),e.state.node_displays[a].changeAct(t.display_act_code),e.state.selected_node.setDisplayActCode(t.display_act_code),e.state.node_displays[a].updateDisplay(),Ce.$emit("update_displays"),o["a"].nextTick().then(function(){var a={};a.code=t.code,a.id=e.state.selected_node.cell.id,Rt.emit("edit_node_code",a),e.dispatch("auto_execute")})},add_connection:function(e,t){Rt.emit("make_connection",t),e.state.code_nodes[t.target_id].inputs[t.target_var]={id:t.source_id,var_name:t.source_var},e.dispatch("auto_execute")},remove_connection:function(e,t){Rt.emit("delete_connection",t),e.dispatch("auto_execute")},rename_connection:function(e,t){Rt.emit("rename_connection",t),e.dispatch("auto_execute")},execute_server:function(e){e.commit("clear_code_error_list");var t={},a=e.state.node_displays;for(var o in a)t[o]=a[o].scope;Rt.emit("execute",t,function(t){e.state.results=t,e.state.run_id+=1,e.state.canvas.addResults(t);var a={};for(var o in e.state.node_displays){var i=e.state.node_displays[o];a[o]=i.scope}e.state.canvas.addScopes(a),Ce.$emit("update_displays"),e.dispatch("update_all_cells")})},socket_setResults:function(e,t){t=JSON.parse(t),e.state.results=t,e.state.run_id+=1,e.state.canvas.addResults(t),Ce.$emit("update_displays")},socket_setScopes:function(e,t){for(var a in t=JSON.parse(t),e.state.node_displays){var o=e.state.node_displays[a];for(var i in o.scope)"__ob__"!=i&&"__proto__"!=i&&(o.scope[i]=t[a][i])}e.state.run_id+=1,e.state.canvas.addScopes(t),Ce.$emit("update_displays")},auto_execute:function(e){e.state.config.auto_exec&&e.dispatch("execute_server")},delete_node:function(e,t){Rt.emit("delete_node",t),e.state.node_displays[t].$destroy(),delete e.state.node_displays[t],delete e.state.code_nodes[t]},change_element_color:function(e,t){e.state.canvas.setCellColor(t)},change_element_stroke_size:function(e,t){e.state.canvas.setCellStroke(t)},change_element_dashed:function(e,t){e.state.canvas.setDashed(t)},change_dark_mode:function(e,t){e.commit("set_dark_mode",t),e.state.canvas.updateSyles()},save_config_file:function(e){Rt.emit("save_config_file",JSON.stringify(e.state.config))},socket_setNodeOverlay:function(e,t){var a=t["node_id"],o=t["overlay_type"],i=e.state.code_nodes[a].cell;e.state.canvas.removeOverlay(i),e.state.canvas.setOverlay(i,o)}}}),ea=a("f87c"),ta=a("85fe"),aa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{ref:"plot_div"})])},oa=[],ia={props:["chart"],mounted:function(){Bt.a.plot(this.$refs.plot_div,this.chart.traces,this.chart.layout,{displayModeBar:!1})},watch:{chart:{handler:function(){Bt.a.newPlot(this.$refs[this.chart.uuid],this.chart.traces,this.chart.layout)},deep:!0}}},na=ia,ra=Object(Ie["a"])(na,aa,oa,!1,null,null,null),sa=ra.exports,la=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",{key:e.table_key,staticClass:"pyw-table"},[a("thead",[a("tr",[a("th"),e._l(e.value.columns,function(t,o){return a("th",{key:o,staticClass:"pyw-table-header"},[a("button",{staticStyle:{"min-width":"0",width:"25px",height:"25px","min-height":"0"},attrs:{color:"grey lighten-2"},on:{click:function(t){return e.deleteColumn(o)}}},[a("v-icon",{staticStyle:{"font-size":"10px"}},[e._v("\n            close\n          ")])],1)])}),a("th",{staticClass:"pyw-table-header"},[e.enable_column_expand?a("button",{staticStyle:{"min-width":"0",width:"25px",height:"25px","min-height":"0"},attrs:{color:"grey lighten-2"},on:{click:function(t){return e.addColumn()}}},[a("v-icon",{staticStyle:{"font-size":"10px"}},[e._v("\n            add\n          ")])],1):e._e()])],2),a("tr",[a("th"),e._l(e.value.columns,function(t,o){return a("th",{key:o,staticClass:"pyw-table-header"},[e._v("          \n        Type: "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.value.column_types[o],expression:"value.column_types[index]"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.value.column_types,o,t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"Number",selected:"selected"}},[e._v("Number")]),a("option",{attrs:{value:"Text"}},[e._v("Text")]),a("option",{attrs:{value:"Date"}},[e._v("Date")])])])}),a("th",{staticClass:"pyw-table-header"})],2),a("tr",[a("th",{staticClass:"table-header",staticStyle:{"user-select":"none"}}),e._l(e.value.columns,function(t,o){return a("Cell",{key:o,attrs:{value:e.value.columns[o],cell_class:"pyw-table-header",align:"center"},on:{input:function(t){return e.columnChanged(t,o)}}})}),a("th",{staticClass:"pyw-table-header"})],2)]),a("tbody",e._l(e.value.data,function(t,o){return a("tr",{key:"row_"+o},[o<e.value.data.length-1?a("td",{staticClass:"pyw-table-header",staticStyle:{"user-select":"none"}},[a("span",[a("button",{staticStyle:{"min-width":"0",width:"25px",height:"25px","min-height":"0"},attrs:{color:"grey lighten-2"},on:{click:function(t){return e.deleteRow(o)}}},[a("v-icon",{staticStyle:{"font-size":"10px"}},[e._v("close")])],1),e._v("              \n            "+e._s(o)+"\n          ")])]):e._e(),o==e.value.data.length-1?a("td",{staticClass:"pyw-table-header",staticStyle:{"min-width":"40px","min-height":"30px"}},[a("span")]):e._e(),e._l(e.value.columns,function(i,n){return a("Cell",{key:"cell_"+o+"_"+n,ref:"cell_"+o+"_"+n,refInFor:!0,attrs:{value:t[n],cell_class:"pyw-table-td",align:"right"},on:{input:function(t){return e.cellChanged(t,o,n)},focused:function(t){e.selected_cell={i:o,j:n}},paste:function(t){e.parseVal(t,o,n)},focus_lower:function(t){return e.focusLower(o,n)},up:function(t){return e.moveRow(-1,o,n)},down:function(t){return e.moveRow(1,o,n)},left:function(t){return e.moveCol(-1,o,n)},right:function(t){return e.moveCol(1,o,n)}}})}),a("td",{staticClass:"pyw-table-td"},[e._v(" ... ")])],2)}),0)])},ca=[],da=(a("28a5"),a("6b54"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{ref:"cell",class:e.comp_cell_class,attrs:{tabindex:"1",align:e.align},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.$emit("up")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.$emit("down")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.$emit("left")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])?null:"button"in t&&2!==t.button?null:e.$emit("right")}],dblclick:e.editing,click:function(t){return e.captureFocus()},blur:function(t){e.is_focused=!1},keydown:function(t){return e.processKeyDown(t)}}},[a("div",{staticStyle:{width:"minmax(100px, auto)"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.edit,expression:"edit == false"}]},[a("label",{staticStyle:{"user-select":"none"}},[e._v(" "+e._s(e.value))])]),a("input",{directives:[{name:"show",rawName:"v-show",value:1==e.edit,expression:"edit == true"},{name:"model",rawName:"v-model",value:e.cell_input,expression:"cell_input"}],ref:"cellinput",staticStyle:{"max-width":"30px"},attrs:{type:"text"},domProps:{value:e.cell_input},on:{change:function(t){return e.$emit("input",e.cell_input)},focus:e.focused,blur:function(t){e.edit=!1},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.finishEdit(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancelEdit()}],paste:function(t){return e.onPaste(t)},input:function(t){t.target.composing||(e.cell_input=t.target.value)}}})])])}),ua=[],_a={props:["value","cell_class","align"],data:function(){return{edit:!1,is_focused:!1,cell_input:this.value,previous_val:""}},computed:{comp_cell_class:{get:function(){var e="";return"pyw-table-header"!=this.cell_class&&(e=this.edit||this.is_focused?"selected":"unselected"),this.cell_class+" "+e}}},methods:{focused:function(){},finishEdit:function(e){this.edit=!1,this.$emit("input",this.cell_input),this.$nextTick(function(){this.$emit("focus_lower")})},processKeyDown:function(e){this.is_focused&&!this.edit&&(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=65&&e.keyCode<=90||e.keyCode>=96&&e.keyCode<=105)&&(this.cell_input="",this.editing())},loseFocus:function(){this.$refs.cell.blur(),this.is_focused=!1},captureFocus:function(){this.edit||(this.$refs.cell.focus(),this.is_focused=!0),this.$emit("focused")},selectCell:function(){this.$nextTick(function(){this.$refs.cell.click()})},cancelEdit:function(){this.value=this.previous_val,this.cell_input=this.previous_val,this.edit=!1},editing:function(){this.previous_val=this.value,this.edit=!0,this.$nextTick(function(){this.$refs.cellinput.focus()})},onPaste:function(e){e.preventDefault();var t=e.clipboardData.getData("text/plain");this.$emit("paste",t)}}},va=_a,ha=(a("892d"),Object(Ie["a"])(va,da,ua,!1,null,"4b6eeaea",null)),pa=ha.exports,fa={props:{value:{type:Object,default:function(){return{data:[[]],columns:["0"],column_types:["Number"]}}},enable_column_expand:{type:Boolean,default:!0}},components:{Cell:pa},data:function(){return{selected_cell:{i:0,j:0},table_key:-1}},methods:{deleteColumn:function(e){for(var t=0;t<this.value.data.length;t++){var a=this.value.data[t];e<=a.length-1&&this.value.data[t].splice(e,1)}this.value.columns.splice(e,1),this.value.column_types.splice(e,1),this.redrawTable()},focusLower:function(e,t){var a="cell_"+(e+1).toString()+"_"+t.toString();this.$refs[a][0].selectCell()},moveCol:function(e,t,a){var o=a+e,i="cell_"+t+"_"+a;try{var n="cell_"+t+"_"+o;this.$refs[n][0].selectCell(),this.$refs[i][0].loseFocus()}catch(r){}},moveRow:function(e,t,a){var o=t+e,i="cell_"+t+"_"+a;try{var n="cell_"+o+"_"+a;this.$refs[n][0].selectCell(),this.$refs[i][0].loseFocus()}catch(r){}},cellChanged:function(e,t,a){var o=this;this.value.data[t][a]=e,this.paddFinalRow(),this.redrawTable();var i=t+1;this.$nextTick(function(){o.$refs["cell_"+i+"_"+a][0].$el.click()})},deleteRow:function(e){this.value.data.splice(e,1),this.redrawTable()},addColumn:function(){var e=1;while(this.value.columns.indexOf(e.toString())>0)e+=1;this.value.columns.push(e.toString()),this.value.column_types.push("Number"),this.redrawTable()},columnChanged:function(e,t){this.value.columns[t]=e,this.redrawTable()},redrawTable:function(){this.table_key=-1*this.table_key},parseVal:function(e,t,a){this.parseText(e,t,a),this.redrawTable()},parseText:function(e,t,a){for(var o=this.value.data.length,i=this.value.columns,n=e.split(/\r?\n/),r=n.length,s=0;s<r;s++){var l=s+t;l>o-1&&(this.value.data.push([]),o+=1);for(var c=n[s],d=c.split("\t"),u=d.length,_=this.value.data[l].length,v=0;v<u;v++){var h=a+v;h<=_-1?this.value.data[l][h]=d[v]:(this.value.data[l].push(d[v]),_+=1)}_>i&&(i=_)}this.paddFinalRow()},checkForEmptyRow:function(e){for(var t=!0,a=0;a<e.length;a++)if(a in e){e[a].trim().length>0&&(t=!1);break}return t},paddFinalRow:function(){var e=this.value.data.length;this.value.data[e-1].length>0&&!this.checkForEmptyRow(this.value.data[e-1])&&this.value.data.push([])}}},ma=fa,ga=(a("faa8"),Object(Ie["a"])(ma,la,ca,!1,null,null,null)),ya=ga.exports;ze()(ga,{VIcon:O["a"]});a("d5e8"),a("d1e7");var ba=a("bc3a"),ka=a.n(ba);o["a"].use(Lt),o["a"].component("plot",sa),o["a"].component("grid",ya),o["a"].directive("observe-visibility",ta["a"]),o["a"].config.productionTip=!1;var wa=ka.a.create({timeout:5e3,baseURL:"http://localhost:5000/"});wa.get("/config",{withCredentials:!1}).then(function(e){Zt.state.config=e.data}).catch(function(e){console.log(e)}).then(function(){o["a"].use(ea["a"],Rt,{store:Zt}),new o["a"]({store:Zt,render:function(e){return e($t)}}).$mount("#app")})},"7e8b":function(e,t,a){e.exports=a.p+"img/hourglass.14df74c7.png"},"892d":function(e,t,a){"use strict";var o=a("8947"),i=a.n(o);i.a},8947:function(e,t,a){},b68c:function(e,t,a){"use strict";var o=a("fe02"),i=a.n(o);i.a},bb5a:function(e,t,a){e.exports=a.p+"img/error.3aacd2be.png"},df1d:function(e,t,a){},faa8:function(e,t,a){"use strict";var o=a("df1d"),i=a.n(o);i.a},fe02:function(e,t,a){}});
//# sourceMappingURL=index.8f1bc65a.js.map