(function(e){function t(t){for(var o,r,s=t[0],l=t[1],c=t[2],u=0,_=[];u<s.length;u++)r=s[u],i[r]&&_.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(_.length)_.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,s=1;s<a.length;s++){var l=a[s];0!==i[l]&&(o=!1)}o&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var o={},i={app:0},n=[];function r(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=o,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var o=a("1356"),i=a.n(o);i.a},"048e":function(e,t,a){"use strict";var o=a("1233"),i=a.n(o);i.a},"0c10":function(e,t,a){e.exports=a.p+"img/success.0295b738.png"},1:function(e,t){},1233:function(e,t,a){},1356:function(e,t,a){},"2a06":function(e,t,a){e.exports=a.p+"img/warning.a999d80d.png"},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var o=a("a026"),i=a("bb71"),n=a("8336"),r=a("0798"),s=a("c6a6"),l=a("8212"),c=a("4ca6"),d=a("887a"),u=a("288c"),_=a("2bc5"),v=a("a609"),h=a("a4f6"),p=a("b0af"),f=a("5e66"),m=a("ac7c"),g=a("cc20"),y=a("2b5d"),b=a("27e2"),k=a("c377"),x=a("8fea"),w=a("2e4b"),S=a("169a"),C=a("ce7e"),V=a("cd55"),D=a("553a"),$=a("4bd4"),T=a("ce87"),E=a("132d"),O=a("adda"),F=a("b675"),N=a("604c"),L=a("0f8e"),M=a("24c9"),P=a("8860"),R=a("e449"),A=a("8bd2"),I=a("f774"),z=a("de8e"),U=a("891e"),j=a("8dd9"),B=a("8b9c"),Y=a("026c"),G=a("490a"),H=a("8e36"),K=a("43a6"),W=a("5963"),q=a("1d4d"),J=a("6b53"),X=a("b56d"),Q=a("ba0d"),Z=a("2db4"),ee=a("7f2e"),te=a("c73b"),ae=a("7e85"),oe=a("e0c7"),ie=a("b73d"),ne=a("afd9"),re=a("fe57"),se=a("a844"),le=a("2677"),ce=a("8414"),de=a("c964"),ue=a("71d9"),_e=a("3a2f"),ve=a("eb2a"),he=a("f665"),pe=a("c584"),fe=a("3ccf"),me=a("0d3d"),ge=a("acdd"),ye=a("c341");a("da64");o["a"].use(i["a"],{iconfont:"md",components:{VBtn:n["a"],VAlert:r["a"],VAutocomplete:s["a"],VAvatar:l["a"],VBadge:c["a"],VBottomNav:d["a"],VBottomSheet:u["a"],VBreadcrumbs:_["a"],VBtnToggle:v["a"],VCalendar:h["a"],VCard:p["a"],VCarousel:f["a"],VCheckbox:m["a"],VChip:g["a"],VCombobox:y["a"],VCounter:b["a"],VDataIterator:k["a"],VDataTable:x["a"],VDatePicker:w["a"],VDialog:S["a"],VDivider:C["a"],VExpansionPanel:V["a"],VFooter:D["a"],VForm:$["a"],VHover:T["a"],VIcon:E["a"],VImg:O["a"],VInput:F["a"],VItemGroup:N["b"],VJumbotron:L["a"],VLabel:M["a"],VList:P["a"],VMenu:R["a"],VMessages:A["a"],VNavigationDrawer:I["a"],VOverflowBtn:z["a"],VPagination:U["a"],VSheet:j["a"],VParallax:B["a"],VPicker:Y["a"],VProgressCircular:G["a"],VProgressLinear:H["a"],VRadioGroup:K["a"],VRangeSlider:W["a"],VRating:q["a"],VResponsive:J["a"],VSelect:X["a"],VSlider:Q["a"],VSnackbar:Z["a"],VSparkline:ee["a"],VSpeedDial:te["a"],VStepper:ae["a"],VSubheader:oe["a"],VSwitch:ie["a"],VSystemBar:ne["a"],VTabs:re["a"],VTextarea:se["a"],VTextField:le["a"],VTimeline:ce["a"],VTimePicker:de["a"],VToolbar:ue["a"],VTooltip:_e["a"],VTreeview:ve["a"],VWindow:he["a"]},directives:{ClickOutside:pe["a"],Ripple:fe["a"],Resize:me["a"],Scroll:ge["a"],Touch:ye["a"]}});var be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-toolbar",{attrs:{app:"",dark:"",fixed:"","clipped-left":"",flat:""}},[a("v-toolbar-title",{staticClass:"headline text-uppercase"},[a("span",[e._v("Py")]),a("span",{staticClass:"font-weight-light"},[e._v("Weaver")])]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{flat:"",small:""},on:{click:e.OpenFile}},[a("span",[e._v("Open file")]),a("v-icon",[e._v("folder_open")])],1),a("v-btn",{attrs:{flat:"",small:""},on:{click:e.SaveModel}},[a("span",[e._v("Save model")]),a("v-icon",[e._v("cloud_download")])],1)],1),e.connected?a("v-chip",{attrs:{color:"green","text-color":"white"}},[e._v("Connected")]):e._e(),e.connected?e._e():a("v-chip",{attrs:{color:"red","text-color":"white"}},[e._v("Disconnected")])],1),a("input",{attrs:{type:"file",id:"fileInput",hidden:""},on:{change:function(t){return e.OpenModel(t)}}}),a("SideBar"),a("v-content",{staticStyle:{overflow:"hidden"}},[a("v-toolbar",{staticClass:"grey darken-2",attrs:{dark:"",dense:""}},[e._v("          \n                    \n        Ouline        \n        "),a("v-item-group",[a("v-btn",{attrs:{flat:"",icon:""},on:{click:function(t){return e.SetDashed(!1)}}},[a("v-icon",[e._v("remove")])],1),a("v-btn",{attrs:{flat:"",icon:""},on:{click:function(t){return e.SetDashed(!0)}}},[a("v-icon",[e._v("more_horiz")])],1)],1),a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[a("v-btn",e._g({attrs:{dark:"",icon:""}},o),[a("v-icon",[e._v("format_color_fill")])],1)]}}])},[a("v-list",{attrs:{dark:""}},e._l(e.colors,function(t,o){return a("v-list-tile",{key:o,on:{click:function(a){return e.SetColor(t.code)}}},[a("v-list-tile-title",[a("v-icon",{attrs:{color:t.code}},[e._v("format_color_fill")])],1)],1)}),1)],1),a("v-overflow-btn",{staticStyle:{width:"50px"},attrs:{items:["1","2","3","5","8"],label:"Stroke size","hide-details":"",overflow:""},on:{change:function(t){return e.SetStrokeSize()}},model:{value:e.stroke_size,callback:function(t){e.stroke_size=t},expression:"stroke_size"}}),a("v-divider",{attrs:{vertical:""}}),a("v-text-field",{staticClass:"caption",attrs:{small:"",placeholder:"Node Library Search...","prepend-inner-icon":"library_books"}})],1),a("v-card",{attrs:{flat:"",height:"100%"}},[a("div",{class:e.canvas_color,attrs:{id:"canvas"}})]),a("v-card",{staticStyle:{height:"100px"},attrs:{color:"red"}},[a("div",[e._v("ASDASD")])])],1),a("CodeEditor"),a("LibrarySaveDialog"),a("v-footer",{staticClass:"pa-3",attrs:{app:"",dark:""}},[a("v-btn",{attrs:{color:"grey darken-4",dark:""},on:{click:e.resetServer}},[e._v("Reset")]),a("v-spacer"),a("div",[e._v("© "+e._s((new Date).getFullYear()))])],1)],1)},ke=[],xe=(a("6762"),a("2fdb"),a("d225")),we=a("b0b4"),Se=new o["a"],Ce=a("0c10"),Ve=a.n(Ce),De=a("bb5a"),$e=a.n(De),Te=a("7e8b"),Ee=a.n(Te),Oe=a("2a06"),Fe=a.n(Oe),Ne=function(){function e(t,a){Object(xe["a"])(this,e),this.container=t,this.graph={},this.store=a,this.codeNode={}}return Object(we["a"])(e,[{key:"GetModelXML",value:function(){var e=this.graph,t=new mxCodec,a=t.encode(e.getModel()),o=mxUtils.getPrettyXml(a);return o}},{key:"LoadModel",value:function(e){var t=this.graph,a=e,o=mxUtils.parseXml(a),i=o.documentElement,n=new mxCodec(i.ownerDocument);n.decode(i,t.getModel())}},{key:"mount",value:function(){var e=this;mxEvent.disableContextMenu(this.container),mxGraph.prototype.isCellMovable=function(e){if(this.lastEvent.altKey)return!1;var t=this.view.getState(e),a=null!=t?t.style:this.getCellStyle(e);return this.isCellsMovable()&&!this.isCellLocked(e)&&0!=a[mxConstants.STYLE_MOVABLE]},mxGraphHandler.prototype.guidesEnabled=!0,mxEdgeHandler.prototype.snapToTerminals=!0;var t=new mxGraph(this.container);this.graph=t,t.store=this.store,t.setAllowDanglingEdges(!1),t.setConnectable(!0),t.setMultigraph(!0),t.isCellEditable=function(e){return!1},t.htmlLabels=!0,t.autoSizeCells=!0,t.foldingEnabled=!1,t.setPanning(!0),t.scrollTileSize=new mxRectangle(0,0,400,400),this.calcDefaultStyles();var a=t.getPreferredSizeForCell;t.getPreferredSizeForCell=function(e){var t=a.apply(this,arguments),o=(this.getCellStyle(e),document.getElementById("node_"+e.id));return t.width=o.offsetWidth+50,t.height=o.offsetHeight+50,t},mxRubberband.prototype.isForceRubberbandEvent=function(e){return!1},new mxRubberband(t),t.isPort=function(e){this.getCellGeometry(e);return!1},mxEvent.addMouseWheelListener(mxUtils.bind(this,function(e,a){1==a?t.zoomIn():t.zoomOut()}));var o=new mxKeyHandler(t);o.bindKey(46,function(e){t.isEnabled()&&t.removeCells()}),t.connectionHandler.addListener(mxEvent.CONNECT,function(t,a){var o=a.getProperty("cell"),i={source_id:o.source.parent.id,target_id:o.target.parent.id,source_var:o.source.value,target_var:o.target.value};e.store.dispatch("add_connection",i)}),t.addListener(mxEvent.DOUBLE_CLICK,function(t,a){var o=a.getProperty("cell"),i=a.getProperty("event");if(null!=o&&"rect"==i.target.localName&&o.isNode){var n=e.store.state.code_nodes[o.id];e.store.dispatch("open_code_editor",n)}}),t.addListener(mxEvent.MOUSE_MOVE,function(e,a){t.isMouseDown}),t.addListener(mxEvent.CELLS_REMOVED,function(t,a){for(var o=a.properties.cells,i=0;i<o.length;i++){var n=o[i];if(n.edge){var r={source_id:n.source.parent.id,source_var:n.source.value,target_id:n.target.parent.id,target_var:n.target.value};e.store.dispatch("remove_connection",r)}}for(i=0;i<o.length;i++){n=o[i];n.isNode&&e.store.dispatch("delete_node",n.id)}})}},{key:"addResults",value:function(e){var t=this.graph.getDefaultParent();this.graph.getModel().beginUpdate();try{t.results=JSON.stringify(e)}finally{this.graph.getModel().endUpdate()}}},{key:"addScopes",value:function(e){var t=this.graph.getDefaultParent();this.graph.getModel().beginUpdate();try{t.scopes=JSON.stringify(e)}finally{this.graph.getModel().endUpdate()}}},{key:"addNode",value:function(e){var t=null,a=this.graph.getDefaultParent();this.graph.getModel().beginUpdate();try{var o=e.outputs,i=e.inputs,n=e.id,r=30*Math.max(o.length,i.length)+40;e.height||(e.height=r);t=this.graph.insertVertex(a,n,"",e.x,e.y,e.width,e.height,"verticalAlign=middle");t.value="<div style='border: 1px solid;' id='node_"+t.id+"' class='node_display'></div>",t.display_act_code="",t.setConnectable(!1),t.isNode=!0}finally{this.graph.getModel().endUpdate()}return this.changePorts(t,o,1,"output"),this.changePorts(t,i,0,"input"),t}},{key:"addEdge",value:function(e){for(var t=this.graph,a=t.getDefaultParent(),o=t.getModel(),i=o.cells[e["source_id"]],n=null,r=0;r<i.children.length;r++){var s=i.children[r];if(s.value==e["source_var"]){n=s;break}}var l=o.cells[e["target_id"]],c=null;for(r=0;r<l.children.length;r++){var d=l.children[r];if(d.value==e["target_var"]){c=d;break}}o.beginUpdate();try{t.insertEdge(a,null,"",n,c)}finally{o.endUpdate()}}},{key:"changePorts",value:function(e,t,a,o){var i=this.graph.getModel(),n=[],r=[],s="";s=0==a?"labelPosition=right;align=left;deletable=0":"labelPosition=left;align=right;deletable=0",this.graph.getModel().beginUpdate();try{if(e.children)for(var l=0;l<e.children.length;l++){var c=e.children[l],d=c.value,u=c.tag;t.includes(d)||u!=o?u==o&&(r.push(c),n.push(d)):(this.graph.removeCells(i.getEdges(c),!1),this.graph.removeCells([c],!1),l-=1)}for(l=0;l<t.length;l++){d=t[l];if(n.includes(d)){_=r[l];_.geometry.y=1/(t.length+1)*(l+1)}else{var _=this.graph.insertVertex(e,null,d,a,1/(t.length+1)*(l+1),10,10,s,!0);_.geometry.offset=new mxPoint(-5,-5),_.setConnectable(!0),_.tag=o}}this.graph.getView().validate()}finally{this.graph.getModel().endUpdate()}}},{key:"updateCell",value:function(e){this.graph.getView().clear(e,!1,!1),this.graph.getView().validate(),this.graph.cellSizeUpdated(e,!0)}},{key:"updateCellSize",value:function(e){this.graph.cellSizeUpdated(e,!0)}},{key:"setCellColor",value:function(e){for(var t=this.graph.selectionModel.cells,a=0;a<t.length;a++){var o=t[a],i=o.getStyle(),n=mxUtils.setStyle(i,mxConstants.STYLE_STROKECOLOR,e);this.graph.setCellStyle(n,[o])}}},{key:"setCellStroke",value:function(e){for(var t=this.graph.selectionModel.cells,a=0;a<t.length;a++){var o=t[a],i=o.getStyle(),n=mxUtils.setStyle(i,mxConstants.STYLE_STROKEWIDTH,e);this.graph.setCellStyle(n,[o])}}},{key:"setDashed",value:function(e){for(var t=0,a=this.graph.selectionModel.cells,o=0;o<a.length;o++){var i=a[o],n=i.getStyle();e&&(t=1);var r=mxUtils.setStyle(n,mxConstants.STYLE_DASHED,t);this.graph.setCellStyle(r,[i])}}},{key:"calcDefaultStyles",value:function(){var e=this.graph;if(this.store.state.config.dark_mode){var t=e.getStylesheet().getDefaultVertexStyle();t["fillColor"]="#212121",t["strokeColor"]="#FFFFFF",t["fontColor"]="#FFFFFF",t["fontStyle"]="1",t=e.getStylesheet().getDefaultEdgeStyle(),t["strokeColor"]="#FFFFFF",t["fontColor"]="#FFFFFF",t["fontStyle"]="0",t["fontStyle"]="0",t["startSize"]="8",t["endSize"]="8",t[mxConstants.STYLE_ROUNDED]=!0,t[mxConstants.STYLE_EDGE]=mxEdgeStyle.OrthConnector,t[mxConstants.STYLE_STROKEWIDTH]="1",t[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR]="#212121"}else{t=e.getStylesheet().getDefaultVertexStyle();t["fillColor"]="#FFFFFF",t["strokeColor"]="#000000",t["fontColor"]="#000000",t["fontStyle"]="1",t=e.getStylesheet().getDefaultEdgeStyle(),t["strokeColor"]="#000000",t["fontColor"]="#000000",t["fontStyle"]="0",t["fontStyle"]="0",t["startSize"]="8",t["endSize"]="8",t[mxConstants.STYLE_ROUNDED]=!0,t[mxConstants.STYLE_EDGE]=mxEdgeStyle.EntityRelation,t[mxConstants.STYLE_STROKEWIDTH]="1",t[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR]="#FFFFFF"}}},{key:"updateSyles",value:function(){this.calcDefaultStyles()}},{key:"setOverlay",value:function(e,t){var a=null,o="";"ok"==t?(o="Calculation succeeded",a=new mxImage(Ve.a,16,16)):"error"==t?(o="Error",a=new mxImage($e.a,16,16)):"warning"==t?(o="Not enough inputs",a=new mxImage(Fe.a,16,16)):(o="Executing...",a=new mxImage(Ee.a,16,16));var i=new mxCellOverlay(a,o);this.graph.addCellOverlay(e,i)}},{key:"removeOverlay",value:function(e){this.graph.removeCellOverlays(e)}}]),e}(),Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"800",persistent:""},on:{keydown:e.codeDialogShortcuts},model:{value:e.code_dialog,callback:function(t){e.code_dialog=t},expression:"code_dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"gray"}},[a("v-toolbar-title",[e._v("Editor")]),a("v-btn",{attrs:{icon:""},on:{click:e.openSaveDialog}},[a("v-icon",[e._v("save")])],1),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[a("v-icon",[e._v("close")])],1)],1)],1),a("v-card-text",[a("v-tabs",{attrs:{dark:""}},[a("v-tab",[e._v("Code")]),a("v-tab-item",[a("codemirror",{ref:"code_editor",attrs:{options:e.cmOptions},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),a("v-card",{key:e.bug_key,attrs:{dark:""}},[e._v(e._s(e.error_text))])],1),a("v-tab",[e._v("Display")]),a("v-tab-item",[a("codemirror",{ref:"ui_editor",attrs:{options:e.dispCmOptions},model:{value:e.display_code,callback:function(t){e.display_code=t},expression:"display_code"}})],1),a("v-tab",[e._v("Display Actions")]),a("v-tab-item",[a("codemirror",{ref:"script_editor",attrs:{options:e.dispActCmOptions},model:{value:e.display_act_code,callback:function(t){e.display_act_code=t},expression:"display_act_code"}})],1)],1),a("v-spacer")],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green",flat:"",dark:""},on:{click:e.saveCode}},[e._v("Update")])],1)],1)],1)},Me=[],Pe=(a("a7be"),a("db91"),a("8c2e"),a("d69f"),a("f9d4"),a("8f94")),Re={components:{codemirror:Pe["codemirror"]},mounted:function(){var e=this;window.setInterval(function(){e.updateEditors()},250)},data:function(){return{bug_key:-1,cmOptions:{tabSize:4,indentUnit:4,mode:"python",lineNumbers:!0,indentWithTabs:!0,viewportMargin:1/0,line:!0,theme:"base16-dark",autoRefresh:!0},dispCmOptions:{tabSize:4,indentUnit:4,mode:"htmlmixed",lineNumbers:!0,indentWithTabs:!0,viewportMargin:1/0,line:!0,theme:"base16-dark",autoRefresh:!0},dispActCmOptions:{tabSize:4,indentUnit:4,mode:"javascript",lineNumbers:!0,indentWithTabs:!0,viewportMargin:1/0,line:!0,theme:"base16-dark",autoRefresh:!0},has_error:!1}},methods:{bugHighlight:function(){if(this.bug_key=-1*this.bug_key,-1!=this.error_line){var e=this.error_line-1;this.$refs.code_editor.cminstance.addLineClass(e,"background","line-error"),this.$refs.code_editor.codemirror.refresh()}},bugUnHighlight:function(){if(-1!=this.error_line){var e=this.error_line-1;this.$refs.code_editor.cminstance.removeLineClass(e,"background","line-error")}},updateEditors:function(){this.code_dialog&&(this.$refs.code_editor.codemirror&&this.$refs.code_editor.codemirror.refresh(),this.$refs.ui_editor.codemirror&&this.$refs.ui_editor.codemirror.refresh(),this.$refs.script_editor.codemirror&&this.$refs.script_editor.codemirror.refresh())},closeDialog:function(){this.bugUnHighlight(),this.code_dialog=!1},openSaveDialog:function(){this.$store.commit("set_dialog_open",!0)},saveCode:function(){this.$store.dispatch("save_node_code",{code:this.code,display_code:this.display_code,display_act_code:this.display_act_code}),this.closeDialog()},codeDialogShortcuts:function(e){this.code_dialog&&(13===e.keyCode&&e.shiftKey?this.saveCode():27===e.keyCode&&this.closeDialog())}},computed:{error_line:{get:function(){var e=this.$store.state.selected_node.id;return e&&this.$store.state.code_error_dict[e]?this.$store.state.code_error_dict[e].line:-1}},error_text:{get:function(){var e=this.$store.state.selected_node.id;return e&&this.$store.state.code_error_dict[e]?this.$store.state.code_error_dict[e].error:"Error text"}},code:{get:function(){return this.$store.state.code},set:function(e){this.$store.commit("set_code",e)}},display_code:{get:function(){return this.$store.state.display_code},set:function(e){this.$store.commit("set_display_code",e)}},display_act_code:{get:function(){return this.$store.state.display_act_code},set:function(e){this.$store.commit("set_display_act_code",e)}},code_dialog:{get:function(){return this.$store.state.open_code_editor},set:function(e){this.$store.commit("open_editor",e)}}},watch:{code_dialog:function(e,t){e&&this.bugHighlight()}}},Ae=Re,Ie=(a("b68c"),a("2877")),ze=a("6544"),Ue=a.n(ze),je=a("99d9"),Be=a("9910"),Ye=a("71a3"),Ge=a("c671"),He=a("2a7f"),Ke=Object(Ie["a"])(Ae,Le,Me,!1,null,null,null),We=Ke.exports;Ue()(Ke,{VBtn:n["a"],VCard:p["a"],VCardActions:je["a"],VCardText:je["b"],VDialog:S["a"],VIcon:E["a"],VSpacer:Be["a"],VTab:Ye["a"],VTabItem:Ge["a"],VTabs:re["a"],VToolbar:ue["a"],VToolbarItems:He["a"],VToolbarTitle:He["b"]});var qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-navigation-drawer",{attrs:{permanent:"",clipped:"",dark:"",app:"",width:"300","mini-variant":e.drawer_mini}},[a("v-list",[a("v-list-tile",[a("v-list-tile-content"),a("v-list-tile-action",{on:{click:e.toggleMiniDrawer}},[a("v-btn",{attrs:{icon:""}},[e.drawer_mini?a("v-icon",[e._v("keyboard_arrow_right")]):e._e(),e.drawer_mini?e._e():a("v-icon",[e._v("keyboard_arrow_left")])],1)],1)],1),a("v-list-tile",[a("v-list-tile-content",[a("br"),a("br"),a("v-text-field",{attrs:{label:"Document name"},model:{value:e.document_name,callback:function(t){e.document_name=t},expression:"document_name"}}),a("br")],1)],1),a("v-divider"),a("v-list-tile",{on:{click:e.addNode,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.shiftKey?e.canvasShortcuts(t):null}}},[a("v-list-tile-action",[a("v-btn",{staticClass:"text-lg-right",attrs:{icon:""}},[a("v-icon",[e._v("add")])],1)],1),a("v-list-tile-content",[e._v("ADD EMPTY NODE")])],1),a("v-divider"),a("v-list-tile",{on:{click:function(t){e.drawer_mini=!1}}},[a("v-list-tile-action",[a("v-btn",{staticClass:"text-lg-right",attrs:{icon:""}},[a("v-icon",[e._v("library_books")])],1)],1),a("v-list-tile-content",[e._v("Node Library")])],1),a("v-card",{directives:[{name:"show",rawName:"v-show",value:!e.drawer_mini,expression:"!drawer_mini"}],staticStyle:{padding:"10px"}},[a("v-text-field",{attrs:{label:"Search Node Library",dark:"",flat:"","solo-inverted":"","hide-details":"",clearable:"","clear-icon":"mdi-close-circle-outline"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-card",{directives:[{name:"show",rawName:"v-show",value:!e.drawer_mini,expression:"!drawer_mini"}],staticStyle:{padding:"20px","overflow-y":"scroll"},attrs:{height:"300px",flat:""}},[a("v-treeview",{ref:"tree",attrs:{items:e.items,search:e.search,filter:e.filter,"open-on-click":""},scopedSlots:e._u([{key:"prepend",fn:function(t){var o=t.item;return[o.children?a("v-icon",[e._v("folder")]):e._e(),o.children?e._e():a("v-icon",[e._v("insert_drive_file")])]}},{key:"label",fn:function(t){var o=t.item;return[a("div",{on:{click:function(t){return e.addLibraryNode(o.lib_id)}}},[e._v("\n            "+e._s(o.name)+"\n            "),o.children?e._e():a("v-icon",[e._v("add_circle_outline")]),0==o.id?a("v-btn",{attrs:{icon:""},on:{click:e.refreshLibrary}},[a("v-icon",[e._v("refresh")])],1):e._e()],1)]}}])})],1),a("v-divider"),a("v-list-tile",{on:{click:e.runServer}},[a("v-list-tile-action",[a("v-btn",{staticClass:"text-lg-right",attrs:{icon:""}},[a("v-icon",[e._v("computer")])],1)],1),a("v-list-tile-content",[e._v("RUN")])],1),a("v-divider"),a("v-list-tile",[a("v-list-tile-action",[a("v-btn",{staticClass:"text-lg-right",attrs:{icon:""},on:{click:function(t){e.showOptionsDialog=!0}}},[a("v-icon",[e._v("settings")])],1)],1),a("v-list-tile-content",[e._v("SETTINGS")])],1)],1),a("OptionsDialog",{on:{close:function(t){e.showOptionsDialog=!1}},model:{value:e.showOptionsDialog,callback:function(t){e.showOptionsDialog=t},expression:"showOptionsDialog"}})],1)},Je=[],Xe=(a("386d"),a("ffe7")),Qe=a.n(Xe),Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"800",persistent:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"gray"}},[a("v-toolbar-title",[e._v("Options")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",[e._v("close")])],1)],1)],1),a("v-card-text",[a("v-checkbox",{attrs:{label:"Automatically run flowsheet"},model:{value:e.autoRun,callback:function(t){e.autoRun=t},expression:"autoRun"}}),a("v-checkbox",{attrs:{label:"Automatically sync model"},model:{value:e.autoSync,callback:function(t){e.autoSync=t},expression:"autoSync"}}),a("v-checkbox",{attrs:{label:"Dark Mode (requires page reload)"},model:{value:e.darkMode,callback:function(t){e.darkMode=t},expression:"darkMode"}})],1)],1)],1)},et=[],tt={props:["value"],data:function(){return{}},computed:{autoRun:{get:function(){return this.$store.state.config.auto_exec},set:function(e){this.$store.commit("set_auto_exec",e),this.$store.dispatch("save_config_file")}},autoSync:{get:function(){return this.$store.state.config.sync_model},set:function(e){this.$store.commit("set_auto_sync",e),this.$store.dispatch("save_config_file")}},darkMode:{get:function(){return this.$store.state.config.dark_mode},set:function(e){this.$store.dispatch("change_dark_mode",e),this.$$store.dispatch("sync_model_with_server"),this.$store.dispatch("save_config_file")}}}},at=tt,ot=Object(Ie["a"])(at,Ze,et,!1,null,null,null),it=ot.exports;Ue()(ot,{VBtn:n["a"],VCard:p["a"],VCardText:je["b"],VCheckbox:m["a"],VDialog:S["a"],VIcon:E["a"],VSpacer:Be["a"],VToolbar:ue["a"],VToolbarItems:He["a"],VToolbarTitle:He["b"]});var nt={components:{OptionsDialog:it},mounted:function(){},data:function(){return{drawer_mini:!0,search:"",fuse_options:{keys:["name"],distance:100,location:0,maxPatternLength:32,minMatchCharLength:1,id:"id"},showOptionsDialog:!1}},methods:{addNode:function(){this.$socket.emit("new_empty_node")},refreshLibrary:function(){this.$socket.emit("refresh_library")},runServer:function(){this.$store.dispatch("execute_server")},resetServer:function(){this.$socket.emit("reset")},toggleMiniDrawer:function(){this.drawer_mini=!this.drawer_mini},addLibraryNode:function(e){this.$socket.emit("load_node",e)},treeFilter:function(e,t,a){var o=new Qe.a(this.items,this.fuse_options),i=o.search(t);return i.indexOf(e.id)>-1}},computed:{items:{get:function(){return this.$store.state.libraryTree}},filter:function(){return this.treeFilter},document_name:{get:function(){return this.$store.state.document_name},set:function(e){this.$store.commit("set_document_name",e)}}}},rt=nt,st=a("ba95"),lt=a("40fe"),ct=a("5d23"),dt=Object(Ie["a"])(rt,qe,Je,!1,null,null,null),ut=dt.exports;Ue()(dt,{VBtn:n["a"],VCard:p["a"],VDivider:C["a"],VIcon:E["a"],VList:P["a"],VListTile:st["a"],VListTileAction:lt["a"],VListTileContent:ct["a"],VNavigationDrawer:I["a"],VTextField:le["a"],VTreeview:ve["a"]});var _t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"800",persistent:""},model:{value:e.save_dialog,callback:function(t){e.save_dialog=t},expression:"save_dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"gray"}},[a("v-toolbar-title",[e._v("Save to Library")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[a("v-icon",[e._v("close")])],1)],1)],1),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticStyle:{"overflow-y":"scroll",border:"2px solid grey","border-radius":"1px"},attrs:{height:"500px",flat:""}},[a("v-treeview",{ref:"tree",attrs:{items:e.libraryTree,activatable:"",active:e.selected_folder,"return-object":""},on:{"update:active":function(t){e.selected_folder=t}},scopedSlots:e._u([{key:"prepend",fn:function(t){var o=t.item;return[a("div",{on:{mouseover:function(t){e.hover_tree_id=o.id},mouseleave:function(t){e.hover_tree_id=-1}}},[o.children?a("v-icon",[e._v("folder")]):e._e(),o.children?e._e():a("v-icon",[e._v("insert_drive_file")])],1)]}},{key:"label",fn:function(t){var o=t.item;return[a("div",{on:{mouseover:function(t){e.hover_tree_id=o.id},mouseleave:function(t){e.hover_tree_id=-1}}},[e._e(),a("span",[e._v(e._s(o.name))]),e._v("\n                                                 \n                                                "),a("a",[o.id==e.hover_tree_id?a("v-icon",{on:{click:function(t){return e.openEditNameDialog(o)}}},[e._v("edit")]):e._e()],1),a("a",[o.id==e.hover_tree_id&&o.children?a("v-icon",{on:{click:function(t){return e.openNewFolderDialog(o)}}},[e._v("create_new_folder")]):e._e()],1),a("a",[o.id==e.hover_tree_id&&o.children?a("v-icon",{on:{click:function(t){return e.openDeleteFolderDialog(o)}}},[e._v("delete_forever")]):e._e()],1)],1)]}}])})],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-card",{attrs:{flat:"",height:"500px"}},[a("v-text-field",{attrs:{label:"Node Template Name",rules:[e.rules.required],clearable:""},model:{value:e.save_name,callback:function(t){e.save_name=t},expression:"save_name"}}),a("v-textarea",{attrs:{label:"Node Description",value:"Short description of what the node does.","no-resize":"",outline:""}}),a("v-textarea",{attrs:{label:"Search keywords",value:"",hint:"Comma separated keywords","no-resize":"",outline:"","persistent-hint":""}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue",flat:"",dark:""},on:{click:e.saveNode}},[e._v("Save")])],1)],1),a("v-dialog",{attrs:{width:"500px"},model:{value:e.add_folder_dialog,callback:function(t){e.add_folder_dialog=t},expression:"add_folder_dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"gray"}},[a("v-toolbar-title",[e._v("New Folder")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.add_folder_dialog=!1}}},[a("v-icon",[e._v("close")])],1)],1)],1),a("v-card-text",[a("v-text-field",{attrs:{label:"New Folder Name",rules:[e.rules.required]},model:{value:e.new_folder_name,callback:function(t){e.new_folder_name=t},expression:"new_folder_name"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"green",flat:"",dark:""},on:{click:e.createNewFolder}},[e._v("Create")]),a("v-spacer"),a("v-btn",{attrs:{color:"red",flat:"",dark:""},on:{click:function(t){e.add_folder_dialog=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{width:"500px"},model:{value:e.delete_folder_dialog,callback:function(t){e.delete_folder_dialog=t},expression:"delete_folder_dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"gray"}},[a("v-toolbar-title",[e._v("Delete Folder?")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.delete_folder_dialog=!1}}},[a("v-icon",[e._v("close")])],1)],1)],1),a("v-card-text",[e._v("\n                    Are you sure you want to permanently delete the folder and all the content inside?\n                ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"blue",flat:"",dark:""},on:{click:e.deleteFolder}},[e._v("Yes, Delete It")]),a("v-spacer"),a("v-btn",{attrs:{color:"blue",flat:"",dark:""},on:{click:function(t){e.delete_folder_dialog=!1}}},[e._v("No")])],1)],1)],1),a("v-dialog",{attrs:{width:"500px"},model:{value:e.edit_name_dialog,callback:function(t){e.edit_name_dialog=t},expression:"edit_name_dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"gray"}},[a("v-toolbar-title",[e._v("Edit Name")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.edit_name_dialog=!1}}},[a("v-icon",[e._v("close")])],1)],1)],1),a("v-card-text",[a("v-text-field",{attrs:{label:"New Name",rules:[e.rules.required]},model:{value:e.new_item_name,callback:function(t){e.new_item_name=t},expression:"new_item_name"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"green",flat:"",dark:""},on:{click:e.renameItem}},[e._v("Rename")]),a("v-spacer"),a("v-btn",{attrs:{color:"red",flat:"",dark:""},on:{click:function(t){e.edit_name_dialog=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},vt=[],ht=(a("7f7f"),{data:function(){return{selected_folder:[],rename_dialog:!1,name_dialog:!1,save_name:"New Template",rules:{required:function(e){return!!e||"Required."}},hover_tree_id:-1,add_folder_dialog:!1,delete_folder_dialog:!1,edit_name_dialog:!1,selected_item:{},new_folder_name:"New Folder",new_item_name:""}},methods:{closeDialog:function(){this.$store.commit("set_dialog_open",!1)},saveNode:function(){if(this.save_name){var e={},t={},a=this.$store.state.selected_node;t.name=this.save_name,t.code=a.code,t.display_code=a.display_code,t.display_act_code=a.display_act_code;var o=this.selected_folder[0].path;e.path=o,e.node_data=t,this.$socket.emit("save_to_library",e),this.closeDialog()}},openNewFolderDialog:function(e){this.selected_item=e,this.new_folder_name="New Folder",this.add_folder_dialog=!0},openDeleteFolderDialog:function(e){this.selected_item=e,this.delete_folder_dialog=!0},openEditNameDialog:function(e){this.selected_item=e,this.new_item_name=e.name,this.edit_name_dialog=!0},createNewFolder:function(){var e={path:this.selected_item.path,name:this.new_folder_name};this.$socket.emit("new_folder",e),this.add_folder_dialog=!1},deleteFolder:function(){var e=this.selected_item.path;this.$socket.emit("delete_folder",e),this.delete_folder_dialog=!1},renameItem:function(){var e={path:this.selected_item.path,name:this.new_item_name};this.$socket.emit("rename_folder",e),this.edit_name_dialog=!1}},computed:{save_dialog:{get:function(){return this.$store.state.save_dialog}},libraryTree:{get:function(){return this.$store.state.libraryTree}}}}),pt=ht,ft=a("a523"),mt=a("0e8f"),gt=a("a722"),yt=Object(Ie["a"])(pt,_t,vt,!1,null,null,null),bt=yt.exports;Ue()(yt,{VBtn:n["a"],VCard:p["a"],VCardActions:je["a"],VCardText:je["b"],VContainer:ft["a"],VDialog:S["a"],VFlex:mt["a"],VIcon:E["a"],VLayout:gt["a"],VSpacer:Be["a"],VTextField:le["a"],VTextarea:se["a"],VToolbar:ue["a"],VToolbarItems:He["a"],VToolbarTitle:He["b"],VTreeview:ve["a"]});var kt={name:"App",components:{CodeEditor:We,SideBar:ut,LibrarySaveDialog:bt},data:function(){return{connected:!1,toggle_exclusive:2,colors:[{code:"#F44336",color:"red"},{code:"#2196F3",color:"blue"},{code:"#4CAF50",color:"green"},{code:"#FFFFFF",color:"white"},{code:"#FFEB3B",color:"yellow"},{code:"#E91E63",color:"pink"}],stroke_size:"",showOptionsDialog:!1}},mounted:function(){var e=this,t=document.getElementById("canvas"),a=new Ne(t,this.$store);a.mount(),this.$store.commit("set_canvas",a),Se.$on("update_displays",this.updateCanvas),window.setInterval(function(){e.PushModel()},3e4)},methods:{SetDashed:function(e){this.$store.dispatch("change_element_dashed",e)},SetStrokeSize:function(){this.$store.dispatch("change_element_stroke_size",this.stroke_size)},SetColor:function(e){this.$store.dispatch("change_element_color",e)},PushModel:function(){this.$store.dispatch("push_server_model")},OpenFile:function(){var e=document.getElementById("fileInput");e.click()},OpenModel:function(e){var t=this,a=e.target.files[0];if(a){var o=new FileReader;o.onload=function(e){var a=e.target.result;t.$socket.emit("load_model",a)},o.readAsText(a)}},resetServer:function(){this.$socket.emit("reset")},SaveModel:function(){var e=this.$store.state.canvas.GetModelXML(),t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e));var a=this.$store.state.document_name+".xml";t.setAttribute("download",a),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},updateCanvas:function(){this.$store.dispatch("update_all_cells")}},computed:{document_name:{get:function(){return this.$store.state.document_name}},canvas_color:{get:function(){return this.$store.state.config.dark_mode?"grey darken-4":"white"}}},sockets:{connect:function(){this.connected=!0},disconnect:function(){this.connected=!1}}},xt=kt,wt=(a("034f"),a("7496")),St=a("549c"),Ct=Object(Ie["a"])(xt,be,ke,!1,null,null,null),Vt=Ct.exports;Ue()(Ct,{VApp:wt["a"],VBtn:n["a"],VCard:p["a"],VChip:g["a"],VContent:St["a"],VDivider:C["a"],VFooter:D["a"],VIcon:E["a"],VItemGroup:N["b"],VList:P["a"],VListTile:st["a"],VListTileTitle:ct["b"],VMenu:R["a"],VOverflowBtn:z["a"],VSpacer:Be["a"],VTextField:le["a"],VToolbar:ue["a"],VToolbarItems:He["a"],VToolbarTitle:He["b"]});var Dt=a("2f62"),$t="node_id",Tt="is_variable",Et="param_name",Ot="PyWeaverNodeDisplay",Ft={DISPLAY_NODE_ID_ATTR:$t,DISPLAY_VAR_ATTR:Tt,DISPLAY_VAR_NAME_ATTR:Et,DISPLAY_CLASS:Ot},Nt=function(){function e(t,a,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(xe["a"])(this,e),this.canvas=a,this.id=i||null,this.inputs={},this.outputs={},this.code_source="local",this.code="",this.display_code=t,this.display_act_code="",this.cell_id="",this.cell={},this.compiled_display_code="",this.compileDisplayCode(),this.store=o,this.x=20,this.y=20,this.width=100,this.height=null}return Object(we["a"])(e,[{key:"setCell",value:function(e){this.cell=e,this.id=e.id}},{key:"compileDisplayCode",value:function(){this.compiled_display_code="<div "+Ft.DISPLAY_NODE_ID_ATTR+"='"+this.cell.id+"' class='"+Ft.DISPLAY_CLASS+"'id='node_"+this.cell.id+"'>"+this.display_code+"</div>"}},{key:"setCode",value:function(e){this.code=e,this.cell.code=e}},{key:"setDisplayCode",value:function(e){this.display_code=e,this.compileDisplayCode(),this.cell.display_code=e}},{key:"setDisplayActCode",value:function(e){this.display_act_code=e,this.cell.display_act_code=e}}]),e}(),Lt=a("8055"),Mt=a.n(Lt),Pt=Mt()("http://localhost:5000"),Rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{key:e.run_id},[a("v-runtime-template",{attrs:{template:e.template,display_code:e.display_code}})],1)},At=[],It=(a("ac6a"),a("456d"),a("75fc")),zt={bind:function(e,t,a){a.context["scope"][t.arg]||(a.context["scope"][t.arg]=t.value)}};o["a"].directive("val",zt);var Ut=a("61cc"),jt=a.n(Ut),Bt=function(e){return[].concat(Object(It["a"])(Object.keys(e.data&&e.data()||{})),Object(It["a"])(Object.keys(e.props||{})))},Yt=function(e,t,a){if(!t.hasOwnProperty(a)){var o=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,o)}},Gt=function(e){var t={};return e.forEach(function(e){e&&Object.getOwnPropertyNames(e).forEach(function(a){return Yt(e,t,a)})}),t},Ht=function(e,t){var a={};return t.forEach(function(t){return Yt(e,a,t)}),a},Kt={props:{template:String,display_code:String},directives:{Val:zt},data:function(){return{plotly:jt.a}},render:function(e){if(this.template){var t=this.$parent,a=t.$data,o=t.$props,i=t.$options,n="{}";if(this.display_code&&(n=this.display_code),n!=this.$parent.$data._previous_display_code){var r="function(){return "+this.$parent.$data._previous_display_code+" }();",s=Function("return "+r)();for(var l in s)delete i.methods[l],delete this.$parent[l];this.$parent.$data._previous_display_code=n,r="function(){return "+n+" }();";var c=Function("return "+r)();for(var l in c){var d=c[l].bind(this.$parent);i.methods[l]=d,this.$parent[l]=d}}this.$parent.$data._previous_template!=this.template&&(this.$parent.$data.scope={},this.$parent.$data._previous_template=this.template);var u=Object.keys(i.methods||{}),_=Bt(i).concat(u),v=Ht(this.$parent,u),h=Gt([a,o,v]),p={template:this.template||"<div></div>",props:_,computed:i.computed,components:i.components};return e(p,{props:h})}}},Wt={props:["_node","store"],data:function(){return{id:"",template:"<div>Node</div>",display_code:"{}",scope:{},node:{},_previous_template:"",_previous_display_code:"{}"}},components:{VRuntimeTemplate:Kt},directives:{Val:zt},methods:{changeCode:function(e){this.template="<div>"+e+"</div>"},changeAct:function(e){this.display_code=e},updateDisplay:function(){this.$forceUpdate(),this.onResults&&this.onResults()}},computed:{run_id:function(){return this.store.state.run_id}},mounted:function(){this.node=new Proxy(this._node,{get:function(e,t,a){var o=null;if("__ob__"!=t){var i=null,n=null;if(t in e.inputs){console.log("input request");var r=e.inputs[t];r&&(i=r.id,n=r.var_name)}else i=e.id,n=t;i&&n&&i in e.store.state.results&&n in e.store.state.results[i]&&(o=e.store.state.results[i][n])}return o}})}},qt=Wt,Jt=Object(Ie["a"])(qt,Rt,At,!1,null,null,null),Xt=Jt.exports;o["a"].use(Dt["a"]);var Qt=new Dt["a"].Store({state:{canvas:{},selected_node:{},open_code_editor:!1,code:"",display_code:"",display_act_code:"",code_nodes:{},document_name:"Untitled",node_displays:{},results:{},config:{auto_exec:!0,sync_model:!0,dark_mode:!0},run_id:0,libraryTree:[],save_dialog:!1,session_id:null,code_error_dict:{},code_parse_error_list:[]},mutations:{add_code_error:function(e,t){e.code_error_dict[t.id]={line:t.line,type:t.error_tyoe,error:t.error}},clear_code_error_list:function(e){e.code_error_dict={}},set_dark_mode:function(e,t){e.config.dark_mode=t},set_auto_exec:function(e,t){e.config.auto_exec=t},set_sync_model:function(e,t){e.config.sync_model=t},tree_change:function(e,t){e.libraryTree=t},set_selected_node:function(e,t){e.selected_node=t},open_editor:function(e,t){e.open_code_editor=t},set_dialog_open:function(e,t){e.save_dialog=t},set_canvas:function(e,t){e.canvas=t},set_code:function(e,t){e.code=t},set_display_code:function(e,t){e.display_code=t},set_display_act_code:function(e,t){e.display_act_code=t},set_document_name:function(e,t){e.document_name=t},set_session_id:function(e,t){e.session_id=t}},actions:{update_all_cells:function(e){var t=e.state.canvas.graph;for(var a in e.state.code_nodes){var o=e.state.code_nodes[a].cell;t.updateCellSize(o,!0)}},push_server_model:function(e){e.state.config.sync_model&&e.dispatch("sync_model_with_server")},sync_model_with_server:function(e){var t={};t.session_id=e.state.session_id,t.xml=e.state.canvas.GetModelXML(),Pt.emit("sync_model",t)},open_code_editor:function(e,t){e.commit("set_selected_node",t),e.commit("set_code",t.code),e.commit("set_display_code",t.display_code),e.commit("set_display_act_code",t.display_act_code),e.commit("open_editor",!0)},socket_addNode:function(e,t){var a=e.state.canvas,i=t["id"],n=new Nt("Node",e.state.canvas,e,i);n.inputs=t["input_port_names"],n.outputs=t["out_port_names"],t["x"]&&t["y"]&&t["width"]&&t["height"]&&(n.x=t["x"],n.y=t["y"],n.width=t["width"],n.height=t["height"]);var r=a.addNode(n),s=r.id,l=o["a"].extend(Xt),c=new l({propsData:{_node:n,store:e}});n.setCell(r),n.setCode(t.code),c.changeCode(t.display_code),n.setDisplayCode(t.display_code),c.changeAct(t.display_act_code),n.setDisplayActCode(t.display_act_code),c.$mount(),document.getElementById("node_"+s).appendChild(c.$el),e.state.node_displays[r.id]=c,e.state.code_nodes[r.id]=n,o["a"].nextTick().then(function(){a.updateCellSize(r)})},socket_syncSession:function(e,t){e.state.session_id!=t&&(e.commit("set_session_id",t),Pt.emit("request_model"))},socket_forceSessionId:function(e,t){e.commit("set_session_id",t)},socket_addError:function(e,t){e.commit("add_code_error",t)},socket_addConnection:function(e,t){e.state.canvas.addEdge(t),e.state.code_nodes[t.target_id].inputs[t.target_var]={id:t.source_id,var_name:t.source_var}},socket_setLibraryTree:function(e,t){e.commit("tree_change",t)},socket_changeNodeInputPorts:function(e,t){var a=e.state.canvas,o=e.state.selected_node.cell.id,i=e.state.code_nodes[o].cell;for(var n in e.state.code_nodes[o].inputs={},t)e.state.code_nodes[o].inputs[t[n]]=null;a.changePorts(i,t,0,"input")},socket_changeNodeOutputPorts:function(e,t){var a=e.state.canvas,o=e.state.selected_node.cell.id,i=e.state.code_nodes[o].cell;for(var n in e.state.code_nodes[o].outputs={},t)e.state.code_nodes[o].outputs[t[n]]=null;a.changePorts(i,t,1,"output")},save_node_code:function(e,t){e.state.selected_node.setCode(t.code);var a=e.state.selected_node.id;e.state.node_displays[a].changeCode(t.display_code),e.state.selected_node.setDisplayCode(t.display_code),e.state.node_displays[a].changeAct(t.display_act_code),e.state.selected_node.setDisplayActCode(t.display_act_code),e.state.node_displays[a].updateDisplay(),Se.$emit("update_displays"),o["a"].nextTick().then(function(){var a={};a.code=t.code,a.id=e.state.selected_node.cell.id,Pt.emit("edit_node_code",a),e.dispatch("auto_execute")})},add_connection:function(e,t){Pt.emit("make_connection",t),e.state.code_nodes[t.target_id].inputs[t.target_var]={id:t.source_id,var_name:t.source_var},e.dispatch("auto_execute")},remove_connection:function(e,t){Pt.emit("delete_connection",t),e.dispatch("auto_execute")},execute_server:function(e){e.commit("clear_code_error_list");var t={},a=e.state.node_displays;for(var o in a)t[o]=a[o].scope;Pt.emit("execute",t,function(t){e.state.results=t,e.state.run_id+=1,e.state.canvas.addResults(t);var a={};for(var o in e.state.node_displays){var i=e.state.node_displays[o];a[o]=i.scope}e.state.canvas.addScopes(a),Se.$emit("update_displays"),e.dispatch("update_all_cells")})},socket_setResults:function(e,t){t=JSON.parse(t),e.state.results=t,e.state.run_id+=1,e.state.canvas.addResults(t),Se.$emit("update_displays")},socket_setScopes:function(e,t){for(var a in t=JSON.parse(t),e.state.node_displays){var o=e.state.node_displays[a];for(var i in o.scope)"__ob__"!=i&&"__proto__"!=i&&(o.scope[i]=t[a][i])}e.state.run_id+=1,e.state.canvas.addScopes(t),Se.$emit("update_displays")},auto_execute:function(e){e.state.config.auto_exec&&e.dispatch("execute_server")},delete_node:function(e,t){Pt.emit("delete_node",t),e.state.node_displays[t].$destroy(),delete e.state.node_displays[t],delete e.state.code_nodes[t]},change_element_color:function(e,t){e.state.canvas.setCellColor(t)},change_element_stroke_size:function(e,t){e.state.canvas.setCellStroke(t)},change_element_dashed:function(e,t){e.state.canvas.setDashed(t)},change_dark_mode:function(e,t){e.commit("set_dark_mode",t),e.state.canvas.updateSyles()},save_config_file:function(e){Pt.emit("save_config_file",JSON.stringify(e.state.config))},socket_setNodeOverlay:function(e,t){var a=t["node_id"],o=t["overlay_type"],i=e.state.code_nodes[a].cell;e.state.canvas.removeOverlay(i),e.state.canvas.setOverlay(i,o)}}}),Zt=a("f87c"),ea=a("85fe"),ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{ref:"plot_div"})])},aa=[],oa={props:["chart"],mounted:function(){jt.a.plot(this.$refs.plot_div,this.chart.traces,this.chart.layout,{displayModeBar:!1})},watch:{chart:{handler:function(){jt.a.newPlot(this.$refs[this.chart.uuid],this.chart.traces,this.chart.layout)},deep:!0}}},ia=oa,na=Object(Ie["a"])(ia,ta,aa,!1,null,null,null),ra=na.exports,sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",{key:e.table_key,staticClass:"pyw-table"},[a("thead",[a("tr",[a("th"),e._l(e.columns,function(t,o){return a("th",{key:o,staticClass:"pyw-table-header"},[a("button",{staticStyle:{"min-width":"0",width:"25px",height:"25px","min-height":"0"},attrs:{color:"grey lighten-2"}},[a("v-icon",{staticStyle:{"font-size":"10px"}},[e._v("\n            close\n          ")])],1)])}),a("th",{staticClass:"pyw-table-header"},[e.enable_column_expand?a("button",{staticStyle:{"min-width":"0",width:"25px",height:"25px","min-height":"0"},attrs:{color:"grey lighten-2"},on:{click:function(t){return e.addColumn()}}},[a("v-icon",{staticStyle:{"font-size":"10px"}},[e._v("\n            add\n          ")])],1):e._e()])],2),a("tr",[a("th"),e._l(e.columns,function(t,o){return a("th",{key:o,staticClass:"pyw-table-header"},[e._v("          \n        Type: "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.column_types[o],expression:"column_types[index]"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.column_types,o,t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"Number",selected:"selected"}},[e._v("Number")]),a("option",{attrs:{value:"Text"}},[e._v("Text")]),a("option",{attrs:{value:"Date"}},[e._v("Date")])])])})],2),a("tr",[a("th",{staticClass:"table-header",staticStyle:{"user-select":"none"}}),e._l(e.columns,function(t,o){return a("Cell",{key:o,attrs:{value:e.columns[o],cell_class:"pyw-table-header"},on:{input:function(t){return e.columnChanged(t,o)}}})}),a("th",{staticClass:"pyw-table-header"})],2)]),a("tbody",e._l(e.value,function(t,o){return a("tr",{key:"row_"+o},[o<e.value.length-1?a("td",{staticClass:"pyw-table-header",staticStyle:{"user-select":"none"}},[a("span",[a("button",{staticStyle:{"min-width":"0",width:"25px",height:"25px","min-height":"0"},attrs:{color:"grey lighten-2"},on:{click:function(t){return e.deleteRow(o)}}},[a("v-icon",{staticStyle:{"font-size":"10px"}},[e._v("close")])],1),e._v("              \n            "+e._s(o)+"\n          ")])]):e._e(),o==e.value.length-1?a("td",{staticClass:"pyw-table-header",staticStyle:{"min-width":"40px","min-height":"30px"}},[a("span")]):e._e(),e._l(e.columns,function(i,n){return a("Cell",{key:"cell_"+o+"_"+n,ref:"cell_"+o+"_"+n,refInFor:!0,attrs:{value:t[n],cell_class:"pyw-table-td"},on:{input:function(t){return e.cellChanged(t,o,n)},focused:function(t){e.selected_cell={i:o,j:n}},paste:function(t){e.parseVal(t,o,n)},focus_lower:function(t){return e.focusLower(o,n)}}})})],2)}),0)])},la=[],ca=(a("28a5"),a("6b54"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{ref:"cell",class:e.comp_cell_class,attrs:{tabindex:"1"},on:{dblclick:e.editing,click:function(t){return e.captureFocus()},blur:function(t){e.is_focused=!1},keydown:function(t){return e.processKeyDown(t)}}},[a("div",{staticStyle:{width:"minmax(100px, auto)"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.edit,expression:"edit == false"}]},[a("label",{staticStyle:{"user-select":"none"}},[e._v(" "+e._s(e.value))])]),a("input",{directives:[{name:"show",rawName:"v-show",value:1==e.edit,expression:"edit == true"},{name:"model",rawName:"v-model",value:e.cell_input,expression:"cell_input"}],ref:"cellinput",attrs:{type:"text"},domProps:{value:e.cell_input},on:{change:function(t){return e.$emit("input",e.cell_input)},focus:e.focused,blur:function(t){e.edit=!1},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.finishEdit(t)},paste:function(t){return e.onPaste(t)},input:function(t){t.target.composing||(e.cell_input=t.target.value)}}})])])}),da=[],ua={props:["value","cell_class"],data:function(){return{edit:!1,is_focused:!1,cell_input:this.value}},computed:{comp_cell_class:{get:function(){var e="";return"pyw-table-header"!=this.cell_class&&(e=this.edit||this.is_focused?"selected":"unselected"),this.cell_class+" "+e}}},methods:{focused:function(){},finishEdit:function(e){this.edit=!1,this.$emit("input",this.cell_input),this.$nextTick(function(){this.$emit("focus_lower")})},processKeyDown:function(e){this.is_focused&&!this.edit&&(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=65&&e.keyCode<=90||e.keyCode>=96&&e.keyCode<=105)&&(this.cell_input="",this.editing())},captureFocus:function(){this.edit||(this.$refs.cell.focus(),this.is_focused=!0),this.$emit("focused")},selectCell:function(){this.$nextTick(function(){this.$refs.cell.click()})},editing:function(){this.edit=!0,this.$nextTick(function(){this.$refs.cellinput.focus()})},onPaste:function(e){console.log("pasted"),e.preventDefault();var t=e.clipboardData.getData("text/plain");this.$emit("paste",t)}}},_a=ua,va=(a("048e"),Object(Ie["a"])(_a,ca,da,!1,null,"8516dd5a",null)),ha=va.exports,pa={props:{value:{type:Array},columns:{type:Array},enable_column_expand:{type:Boolean,default:!0}},components:{Cell:ha},data:function(){return{selected_cell:{i:0,j:0},table_key:-1,column_types:[]}},methods:{focusLower:function(e,t){var a="cell_"+(e+1).toString()+"_"+t.toString();this.$refs[a][0].selectCell()},cellChanged:function(e,t,a){this.value[t][a]=e,this.paddFinalRow(),this.redrawTable()},deleteRow:function(e){this.value.splice(e,1),this.redrawTable()},deleteColumn:function(e){},addColumn:function(){var e=1;while(this.columns.indexOf(e.toString())>0)e+=1;this.columns.push(e.toString()),this.redrawTable()},columnChanged:function(e,t){this.columns[t]=e,this.redrawTable()},redrawTable:function(){this.table_key=-1*this.table_key},parseVal:function(e,t,a){this.parseText(e,t,a),this.redrawTable()},parseText:function(e,t,a){for(var o=this.value.length,i=this.columns,n=e.split(/\r?\n/),r=n.length,s=0;s<r;s++){var l=s+t;l>o-1&&(this.value.push([]),o+=1);for(var c=n[s],d=c.split("\t"),u=d.length,_=this.value[l].length,v=0;v<u;v++){var h=a+v;h<=_-1?this.value[l][h]=d[v]:(this.value[l].push(d[v]),_+=1)}_>i&&(i=_)}this.paddFinalRow()},checkForEmptyRow:function(e){for(var t=!0,a=0;a<e.length;a++){e[a].trim().length>0&&(t=!1);break}return t},paddFinalRow:function(){var e=this.value.length;this.value[e-1].length>0&&!this.checkForEmptyRow(this.value[e-1])&&this.value.push([])}}},fa=pa,ma=(a("faa8"),Object(Ie["a"])(fa,sa,la,!1,null,null,null)),ga=ma.exports;Ue()(ma,{VIcon:E["a"]});a("d5e8"),a("d1e7");o["a"].use(Ft),o["a"].component("plot",ra),o["a"].component("grid",ga),o["a"].directive("observe-visibility",ea["a"]),o["a"].config.productionTip=!1,o["a"].use(Zt["a"],Pt,{store:Qt}),new o["a"]({store:Qt,render:function(e){return e(Vt)}}).$mount("#app")},"7e8b":function(e,t,a){e.exports=a.p+"img/hourglass.14df74c7.png"},b68c:function(e,t,a){"use strict";var o=a("fe02"),i=a.n(o);i.a},bb5a:function(e,t,a){e.exports=a.p+"img/error.3aacd2be.png"},df1d:function(e,t,a){},faa8:function(e,t,a){"use strict";var o=a("df1d"),i=a.n(o);i.a},fe02:function(e,t,a){}});
//# sourceMappingURL=app.4cf17b1a.js.map